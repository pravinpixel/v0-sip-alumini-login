<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore the inspiring journeys of SIP Abacus alumni. See how our program has empowered students to excel in academics, Olympiads, and realâ€‘world challenges.">
    <meta name="keywords" content="SIP, Alumni, Abacus, Community, Education, Events, Network">
    <meta name="author" content="SIP Abacus Alumni">
    <meta name="robots" content="index, follow">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="SIP Abacus Alumni â€“ Success Stories & Student Achievements">
    <meta property="og:description" content="Explore the inspiring journeys of SIP Abacus alumni. See how our program has empowered students to excel in academics, Olympiads, and realâ€‘world challenges.">
    <meta property="og:image" content="./assets/logo.png">
    <meta property="og:url" content="https://alumni.sipabacus.com/">
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SIP Abacus Alumni â€“ Success Stories & Student Achievements">
    <meta name="twitter:description" content="Explore the inspiring journeys of SIP Abacus alumni. See how our program has empowered students to excel in academics, Olympiads, and realâ€‘world challenges.">
    <meta name="twitter:image" content="./assets/logo.png">
    <title>SIP Abacus Alumni â€“ Success Stories & Student Achievements</title>
    <link rel="icon" href="./assets/favicon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" media="print" onload="this.media='all'">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XM872NJHT6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XM872NJHT6');
</script>


</head>
<body>

    <header>
        <div class="container">
            <a href="#" class="logo">
                <img src="./assets/logo.png" alt="SIP Alumni Logo" width="262" height="59">
            </a>
            <nav>
                <div class="close_btn"><img src="./assets/close.svg" alt=""></div>
                <ul>
                    <li><a href="#legacy">Legacy</a></li>
                    <li><a href="#community">Community Benefits</a></li>
                    <li><a href="#testimonial">Testimonials</a></li>
                    <!-- <li><a href="#achievements">Achievements</a></li> -->
                    <li><a href="#faq">FAQâ€™s</a></li>
                    <li><a class="header_btn common_btn" href="#contact">Register as Alumni</a></li>
                     <li><a class="header_btn common_btn" target="_blank" rel="noopener noreferrer" href="https://sip.designonline.in/alumni/">Login</a></li>
                </ul>
            </nav>
         <div class="menu_btn">
                <img src="./assets/menu.svg" alt="" height="20" width="20">
            </div>
        </div>
    </header>

    <section class="hero">

        <div class="container">
            <div class="content">
            <h1>Where Past Meets Present, and Futures Take Shape</h1>
            <p>At SIP Abacus, we donâ€™t just build math skills. We shape minds, nurture confidence, and spark lifelong success. Our alumni are living proof. As an alumnus, your journey continues to inspire the next generation. From academic achievers to global professionals, the legacy of SIP Abacus lives on in you.</p>
            <a class="header_btn common_btn" href="#contact">Register as Alumni</a>
        </div>
        </div>
    </section>

    <section class="common_section alumni_legacy" id="legacy">
        <div class="container">
            <div class="content" data-aos="fade-right">
                <h2 class="common_heading" >Our Ever-Growing<br class="desktop_break"><span class="red yellow_line">Alumni Legacy</span></h2>
                <p>At SIP Abacus, the impact youâ€™ve made extends far beyond the classroom. These numbers speak of the scale and success of our alumni community, a testament to the brilliance you bring to the world.</p>
                <ul>
                    <li>
                        <h3>1M+ Strong Alumni</h3>
                        <p>A vast network of young minds who have sharpened their skills and shaped their futures with SIP.</p>
                    </li>
                    <li>
                        <h3>Growing Alumni Since 2003</h3>
                        <p>With over two decades of excellence, weâ€™ve been empowering children across the world with focus, confidence, and speed.</p>
                    </li>
                    <li>
                        <h3>Globally Distinguished Alumni</h3>
                        <p>Our alumni have gone on to excel in academics, leadership, entrepreneurship, and more, making their mark across the globe.</p>
                    </li>
                </ul>
            </div>
            <div class="image" data-aos="fade-left">
                <img src="./assets/alumni-legacy.webp" alt="Alumni Legacy" width="100%">
            </div>
        </div>
    </section>

     <section class="common_section sharper_minds" id="testimonial">
        <div class="container">
            <div class="content" data-aos="fade-right">
                <h2 class="common_heading">A Legacy of<br class="desktop_break"><span class="white yellow_line">Sharper Minds</span></h2>
                <p>As a SIP Abacus graduate, you carry the legacy of focus, speed, memory, and confidence, the core skills you mastered with us. Whether youâ€™ve conquered academics, aced competitive exams, or thrived in your career, the SIP Abacus advantage stays with you.</p>
            </div>
            <div class="slider-container" data-aos="fade-up" data-aos-delay="300">
                <div class="owl-carousel sharp_mind_carousel">
                    <div class="item">
                    <div class="video" data-aos="fade-left">
                        <img src="./assets/tn1.png" alt="Sharper Minds">
                        <div class="play_icon" data-link="gNg2JH4id30?si=6u5IrB-UJK1Pvmab"> <img src="./assets/play.svg"> </div>
                    </div>
                </div>
              
                <div class="item">
                    <div class="video" data-aos="fade-left">
                        <img src="./assets/tn2.png" alt="Sharper Minds">
                        <div class="play_icon" data-link="P95zFJdXxTw?si=l0QNHQTd7cTgWBg2"> <img src="./assets/play.svg"> </div>
                    </div>
                </div>

                <div class="item">
                    <div class="video" data-aos="fade-left">
                        <img src="./assets/tn3.png" alt="Sharper Minds">
                        <div class="play_icon" data-link="JIuGkUZOdSI?si=dchVBhPMw1n9Xx7Q"> <img src="./assets/play.svg"> </div>
                    </div>
                </div>

                <div class="item">
                    <div class="video" data-aos="fade-left">
                        <img src="./assets/tn4.png" alt="Sharper Minds">
                        <div class="play_icon" data-link="vangjk-wchQ?si=rcCEt8MCPs8NyiUe"> <img src="./assets/play.svg"> </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </section>

    <section class="common_section community" id="community">
        <div class="container">
            <div class="content" data-aos="fade-up">
            <h2 class="common_heading">Access Your Alumni<br class="desktop_break"><span class="red yellow_line">Community with Ease</span></h2>
            <p>With the SIP Abacus Alumni Network, youâ€™re just a click away from reconnecting with old friends, sharing your journey, and being part of a thriving community of achievers. Whether you're looking to inspire, collaborate, or simply stay in touch, your SIP Abacus family is always within reach. Join us as we celebrate past milestones and future successes together.</p>
        </div>
        <div class="cards" >
            <div class="card" data-aos="fade-up" data-aos-delay="300">
                <div class="image">
                    <img src="./assets/community1.webp" alt="Community">
                </div>
                <h3 class="title">Community Connections</h3>
                <p class="description">Get closer to the communities that matter to you with search fields like community affinity, interests, area of study, location, and class year.</p>
            </div>
            <div class="card" data-aos="fade-up" data-aos-delay="450">
                <div class="image">
                    <img src="./assets/community2.webp" alt="Community">
                </div>
                <h3 class="title">Career Connections</h3>
                <p class="description">Open the door for future opportunities by finding others based on industry, company, skills & specialities, job title, and availability to offer career support.</p>
            </div>
            <div class="card" data-aos="fade-up" data-aos-delay="600">
                <div class="image">
                    <img src="./assets/community3.webp" alt="Community">
                </div>
                <h3 class="title">Alumni Directory</h3>
                <p class="description">Easily connect with alumni through search filters like location, class year, career field, and skills, building meaningful connections for growth.</p>
            </div>
        </div>
        </div>

    </section>


   

    <section class="common_section achievements d_none" id="achievements">
        <div class="container">
            <div class="content" data-aos="fade-up">
                <h2 class="common_heading">Alumni<br class="desktop_break"><span class="red yellow_line">Achievements</span></h2>
                <p>From Math Olympiad champions to public speakers and industry leaders, you shine across diverse fields. Your success is our pride and motivation.</p>
            </div>
        </div>
        
        <div class="slider-container" data-aos="fade-up" data-aos-delay="300">
            <div class="owl-carousel achievements_carousel">
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
                <div class="item">
                    <div class="slider_image">
                        <img src="./assets/slider1.webp" alt="Slider">
                    </div>
                    <div class="slider_content">
                        <p class="name">Souvesh Mahapatra</p>
                        <p class="designation">Senior Hr Consultant in London</p>
                        <span class="year"><img src="./assets/education.svg" alt="">GMC Year - 2010, Cuttack, Odisha</span>
                        <p class="award">Young Scientist awardee from Ex-President Abdul Kalam</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt </p>
                    </div>
                </div>
             
            </div>
        </div>
        
    </section>


    <section class="common_section join_sip" id="contact">
        <div class="container">
            <div class="content" data-aos="fade-right">
                <h2 class="common_heading">Join the SIP<br class="desktop_break"><span class="red white_line">Alumni Circle</span></h2>
                <p>Weâ€™d love to hear where your journey has taken you. Whether you're pursuing academics, working in your dream job, or making a difference in your community, your story inspires us.</p>

                <h6 class="common_heading_Two">To join our alumni network, please confirm your current education status.</h6>

                 <h6 class="common_heading_Three">Have You Completed Your Schooling </h6>
             <div class="common_radio">
              <input type="radio" id="open_register_form" name="open_form" value="yes" class="open_form" checked>
                <label for="open_register_form" class="open_form">Yes</label><br>

                  <input type="radio" id="no_register_form" name="open_form" value="no" class="open_form">
                      <label for="no_register_form" class="open_form">No</label><br>
                  </div>

                  <button type="button" id="showRegistrationBtn" class="common_btn" style="display:none;">
                      Continue Registration
                  </button>

                  <div id="no-interest-ui" class="no-interest-ui" style="display:none;">
                 <div class="interest-card">
                    <div style="display: flex; gap: 10px;">
                    ðŸŽ“
                    <div>
                   <h3>
                    <span>Thank you for your interest</span>
            </h3>
               <p>
                At the moment, we are onboarding alumni who have completed their schooling.
            </p>
            </div>
            </div>

          <div class="wish-box">
            <p>SIP Abacus wishes you the very best for your:</->
            
            <ul>
             <li>ðŸ“š Board Exams</li>
              <li>ðŸŽ“ College Entrance Exams</li>
            </ul>
         </div>
          </div>
        </div>

                <form id="alumni-registration-form" method="post" style="display:none;">
                    <!-- Step 1 Fields -->
                    <div id="step-1-fields">
                        <input type="text" name="name" placeholder="Full Name">
                        <input type="text" name="completion_year" id="completion_year" placeholder="Year of Completion" maxlength="4" inputmode="numeric" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4);">
                        
                     
                        <div class="country-wrapper">
                            <div class="country-input-wrapper">
                                <input type="text" name="country" id="country" value="India" readonly class="country-input">
                            </div>
                        </div>
                        
                        <div class="state-wrapper">
                            <div id="state-select-wrapper" class="state-select-wrapper">
                                <div id="state-trigger" class="state-trigger">
                                    <span id="state-placeholder" class="state-placeholder">Select State</span>
                                    <div class="state-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div id="state-dropdown" class="state-dropdown">
                                    <div id="state-options" class="state-options"></div>
                                </div>
                            </div>
                            <input type="hidden" id="state" name="state">
                        </div>
                        <div class="city-wrapper">
                            <div id="city-select-wrapper" class="city-select-wrapper">
                                <div id="city-trigger" class="city-trigger disabled">
                                    <span id="city-placeholder" class="city-placeholder">Select City</span>
                                    <div class="city-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div id="city-dropdown" class="city-dropdown">
                                    <div id="city-options" class="city-options"></div>
                                </div>
                            </div>
                            <input type="hidden" id="city" name="city">
                        </div>
                        <div class="city-other-wrapper" style="display: none;">
                            <input type="text" name="city_other" id="city_other" placeholder="Enter your city" autocomplete="off">
                            <div id="city-other-suggestions" class="city-other-suggestions"></div>
                        </div>
                        
                        <!-- Pincode Field -->
                        <div class="pincode-wrapper" >
                            <div id="pincode-select-wrapper" class="pincode-select-wrapper">
                                <div id="pincode-trigger" class="pincode-trigger disabled">
                                    <span id="pincode-placeholder" class="pincode-placeholder">Select Pincode</span>
                                    <div class="pincode-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div id="pincode-dropdown" class="pincode-dropdown">
                                    <div id="pincode-options" class="pincode-options"></div>
                                </div>
                            </div>
                            <input type="hidden" id="pincode" name="pincode">
                        </div>
                        
                        <!-- Center Location Field -->
                        <div class="center-location-wrapper" >
                            <div id="center-location-select-wrapper" class="center-location-select-wrapper">
                                <div id="center-location-trigger" class="center-location-trigger disabled">
                                    <span id="center-location-placeholder" class="center-location-placeholder">Select Center Location</span>
                                    <div class="center-location-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div id="center-location-dropdown" class="center-location-dropdown">
                                    <div id="center-location-options" class="center-location-options"></div>
                                </div>
                            </div>
                            <input type="hidden" id="center_location" name="center_location">
                        </div>
                        <div class="center-location-other-wrapper" style="display: none;">
                            <input type="text" name="center_location_other" id="center_location_other" placeholder="Enter center location" autocomplete="off">
                        </div>
                        
                        <!-- Location Selection Radio Buttons -->
                        <div class="location-selection-wrapper">
                            <label class="location-selection-label">Select your location:</label>
                            <div class="location-radio-group">
                                <label class="location-radio-option">
                                    <input type="radio" name="location_type" value="0" id="location-india" checked>
                                    <span class="location-radio-custom"></span>
                                    <span class="location-radio-text">India</span>
                                </label>
                                <label class="location-radio-option">
                                    <input type="radio" name="location_type" value="1" id="location-outside-india">
                                    <span class="location-radio-custom"></span>
                                    <span class="location-radio-text">Outside India</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Email Verify Wrapper (for Outside India) -->
                        <div class="email-verify-wrapper" style="display: none; position: relative;">
                            <input type="email" name="email" placeholder="Email Address" class="email-input">
                            <button type="button" id="verify-email-btn" class="verify-btn" disabled>Verify</button>
                            <span id="email-verification-status" class="verify-status"></span>
                        </div>
                        
                        <!-- Email Action Buttons -->
                        <div class="email-action-buttons">
                            <button type="button" id="edit-email-btn" class="edit-email-btn">Edit</button>
                            <button type="button" id="cancel-email-btn" class="cancel-email-btn">Cancel</button>
                        </div>
                        
                        <!-- Email OTP Timer -->
                        <div id="email-otp-timer" class="otp-timer"></div>
                        
                        <!-- Regular Email Input (for India) -->
                        <input type="email" name="email" placeholder="Email Address" class="regular-email-input">

                        <div class="mobile-verify-wrapper">
                            <div class="mobile-input-container">
                                <div class="country-code-wrapper disabled">
                                    <select id="country-code-select" class="country-code-select">
                                        <option value="+91" data-country="IN">ðŸ‡®ðŸ‡³ +91</option>
                                        <option value="+1" data-country="US">ðŸ‡ºðŸ‡¸ +1</option>
                                        <option value="+44" data-country="GB">ðŸ‡¬ðŸ‡§ +44</option>
                                        <option value="+61" data-country="AU">ðŸ‡¦ðŸ‡º +61</option>
                                        <option value="+81" data-country="JP">ðŸ‡¯ðŸ‡µ +81</option>
                                        <option value="+49" data-country="DE">ðŸ‡©ðŸ‡ª +49</option>
                                        <option value="+33" data-country="FR">ðŸ‡«ðŸ‡· +33</option>
                                        <option value="+39" data-country="IT">ðŸ‡®ðŸ‡¹ +39</option>
                                        <option value="+34" data-country="ES">ðŸ‡ªðŸ‡¸ +34</option>
                                        <option value="+31" data-country="NL">ðŸ‡³ðŸ‡± +31</option>
                                        <option value="+41" data-country="CH">ðŸ‡¨ðŸ‡­ +41</option>
                                        <option value="+46" data-country="SE">ðŸ‡¸ðŸ‡ª +46</option>
                                        <option value="+47" data-country="NO">ðŸ‡³ðŸ‡´ +47</option>
                                        <option value="+45" data-country="DK">ðŸ‡©ðŸ‡° +45</option>
                                        <option value="+358" data-country="FI">ðŸ‡«ðŸ‡® +358</option>
                                        <option value="+32" data-country="BE">ðŸ‡§ðŸ‡ª +32</option>
                                        <option value="+43" data-country="AT">ðŸ‡¦ðŸ‡¹ +43</option>
                                        <option value="+351" data-country="PT">ðŸ‡µðŸ‡¹ +351</option>
                                        <option value="+30" data-country="GR">ðŸ‡¬ðŸ‡· +30</option>
                                        <option value="+48" data-country="PL">ðŸ‡µðŸ‡± +48</option>
                                        <option value="+420" data-country="CZ">ðŸ‡¨ðŸ‡¿ +420</option>
                                        <option value="+36" data-country="HU">ðŸ‡­ðŸ‡º +36</option>
                                        <option value="+40" data-country="RO">ðŸ‡·ðŸ‡´ +40</option>
                                        <option value="+359" data-country="BG">ðŸ‡§ðŸ‡¬ +359</option>
                                        <option value="+385" data-country="HR">ðŸ‡­ðŸ‡· +385</option>
                                        <option value="+386" data-country="SI">ðŸ‡¸ðŸ‡® +386</option>
                                        <option value="+421" data-country="SK">ðŸ‡¸ðŸ‡° +421</option>
                                        <option value="+370" data-country="LT">ðŸ‡±ðŸ‡¹ +370</option>
                                        <option value="+371" data-country="LV">ðŸ‡±ðŸ‡» +371</option>
                                        <option value="+372" data-country="EE">ðŸ‡ªðŸ‡ª +372</option>
                                        <option value="+7" data-country="RU">ðŸ‡·ðŸ‡º +7</option>
                                        <option value="+86" data-country="CN">ðŸ‡¨ðŸ‡³ +86</option>
                                        <option value="+82" data-country="KR">ðŸ‡°ðŸ‡· +82</option>
                                        <option value="+65" data-country="SG">ðŸ‡¸ðŸ‡¬ +65</option>
                                        <option value="+60" data-country="MY">ðŸ‡²ðŸ‡¾ +60</option>
                                        <option value="+66" data-country="TH">ðŸ‡¹ðŸ‡­ +66</option>
                                        <option value="+84" data-country="VN">ðŸ‡»ðŸ‡³ +84</option>
                                        <option value="+62" data-country="ID">ðŸ‡®ðŸ‡© +62</option>
                                        <option value="+63" data-country="PH">ðŸ‡µðŸ‡­ +63</option>
                                        <option value="+852" data-country="HK">ðŸ‡­ðŸ‡° +852</option>
                                        <option value="+853" data-country="MO">ðŸ‡²ðŸ‡´ +853</option>
                                        <option value="+886" data-country="TW">ðŸ‡¹ðŸ‡¼ +886</option>
                                        <option value="+971" data-country="AE">ðŸ‡¦ðŸ‡ª +971</option>
                                        <option value="+966" data-country="SA">ðŸ‡¸ðŸ‡¦ +966</option>
                                        <option value="+974" data-country="QA">ðŸ‡¶ðŸ‡¦ +974</option>
                                        <option value="+965" data-country="KW">ðŸ‡°ðŸ‡¼ +965</option>
                                        <option value="+973" data-country="BH">ðŸ‡§ðŸ‡­ +973</option>
                                        <option value="+968" data-country="OM">ðŸ‡´ðŸ‡² +968</option>
                                        <option value="+962" data-country="JO">ðŸ‡¯ðŸ‡´ +962</option>
                                        <option value="+961" data-country="LB">ðŸ‡±ðŸ‡§ +961</option>
                                        <option value="+972" data-country="IL">ðŸ‡®ðŸ‡± +972</option>
                                        <option value="+90" data-country="TR">ðŸ‡¹ðŸ‡· +90</option>
                                        <option value="+20" data-country="EG">ðŸ‡ªðŸ‡¬ +20</option>
                                        <option value="+27" data-country="ZA">ðŸ‡¿ðŸ‡¦ +27</option>
                                        <option value="+234" data-country="NG">ðŸ‡³ðŸ‡¬ +234</option>
                                        <option value="+254" data-country="KE">ðŸ‡°ðŸ‡ª +254</option>
                                        <option value="+233" data-country="GH">ðŸ‡¬ðŸ‡­ +233</option>
                                        <option value="+212" data-country="MA">ðŸ‡²ðŸ‡¦ +212</option>
                                        <option value="+216" data-country="TN">ðŸ‡¹ðŸ‡³ +216</option>
                                        <option value="+213" data-country="DZ">ðŸ‡©ðŸ‡¿ +213</option>
                                        <option value="+55" data-country="BR">ðŸ‡§ðŸ‡· +55</option>
                                        <option value="+54" data-country="AR">ðŸ‡¦ðŸ‡· +54</option>
                                        <option value="+56" data-country="CL">ðŸ‡¨ðŸ‡± +56</option>
                                        <option value="+57" data-country="CO">ðŸ‡¨ðŸ‡´ +57</option>
                                        <option value="+51" data-country="PE">ðŸ‡µðŸ‡ª +51</option>
                                        <option value="+58" data-country="VE">ðŸ‡»ðŸ‡ª +58</option>
                                        <option value="+593" data-country="EC">ðŸ‡ªðŸ‡¨ +593</option>
                                        <option value="+591" data-country="BO">ðŸ‡§ðŸ‡´ +591</option>
                                        <option value="+595" data-country="PY">ðŸ‡µðŸ‡¾ +595</option>
                                        <option value="+598" data-country="UY">ðŸ‡ºðŸ‡¾ +598</option>
                                        <option value="+52" data-country="MX">ðŸ‡²ðŸ‡½ +52</option>
                                        <option value="+502" data-country="GT">ðŸ‡¬ðŸ‡¹ +502</option>
                                        <option value="+503" data-country="SV">ðŸ‡¸ðŸ‡» +503</option>
                                        <option value="+504" data-country="HN">ðŸ‡­ðŸ‡³ +504</option>
                                        <option value="+505" data-country="NI">ðŸ‡³ðŸ‡® +505</option>
                                        <option value="+506" data-country="CR">ðŸ‡¨ðŸ‡· +506</option>
                                        <option value="+507" data-country="PA">ðŸ‡µðŸ‡¦ +507</option>
                                    </select>
                                </div>
                                <input type="tel" id="mobile-number" name="contact" class="mobile-input" placeholder="Contact Number" oninput="formatMobileNumber(this)" maxlength="15">
                            </div>
                            <button type="button" id="verify-mobile-btn" class="verify-btn" disabled>Verify</button>
                            <span id="verification-status" class="verify-status"></span>
                        </div>
                        
                        <div class="mobile-action-buttons">
                            <button type="button" id="edit-mobile-btn" class="edit-mobile-btn">Edit</button>
                            <button type="button" id="cancel-mobile-btn" class="cancel-mobile-btn">Cancel</button>
                        </div>
                    
                        <div id="otp-timer" class="otp-timer"></div>
                        <div class="otp-verify-wrapper">
                            <input type="text" id="otp-input" class="otp-input-field" placeholder="Enter OTP" maxlength="6" inputmode="numeric">
                            <button type="button" id="verify-otp-btn" class="verify-btn" style="display: none;">Verify OTP</button>
                        </div>
                        <input type="hidden" id="mobile-verified" value="0">
                        
                        <button type="button" id="next-step-btn" class="common_btn">Next</button>
                    </div>
                    
                    <!-- Step 2 Fields -->
                    <div id="step-2-fields" style="display: none;">
                        <input type="text" name="current_location" placeholder="Current Location">
                        
                        <div class="occupation-wrapper">
                            <div id="occupation-select-wrapper" class="occupation-select-wrapper">
                                <div id="occupation-trigger" class="occupation-trigger">
                                    <span id="occupation-placeholder" class="occupation-placeholder">Select Designation</span>
                                    <div class="occupation-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div id="occupation-dropdown" class="occupation-dropdown">
                                    <input type="text" id="occupation-search" class="occupation-search" placeholder="Search or type to add..." autocomplete="off">
                                    <div id="occupation-options" class="occupation-options"></div>
                                </div>
                            </div>
                            <input type="hidden" id="occupation" name="occupation">
                        </div>

                        <!-- Level Completed Dropdown -->
                        <div class="level-completed-wrapper">
                            <div id="level-completed-select-wrapper" class="level-completed-select-wrapper">
                                <div id="level-completed-trigger" class="level-completed-trigger">
                                    <span id="level-completed-placeholder" class="level-completed-placeholder">Select Level Completed</span>
                                    <div class="level-completed-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div id="level-completed-dropdown" class="level-completed-dropdown">
                                    <div id="level-completed-options" class="level-completed-options">
                                        <div class="level-completed-option" data-level="advanced_4">Advanced 4 / Level 8</div>
                                        <div class="level-completed-option" data-level="grandmaster_a">Grandmaster A</div>
                                        <div class="level-completed-option" data-level="grandmaster_b">Grandmaster B</div>
                                        <div class="level-completed-option" data-level="grandmaster_c">Grandmaster C</div>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" id="level_completed" name="level_completed">
                        </div>


                        
                        <div class="form-navigation">
                            <button type="button" id="prev-step-btn" class="common_btn btn-secondary">Previous</button>
                            <button type="submit" class="common_btn">Join the Alumni Network</button>
                        </div>
                    </div>
                </form>

            </div>
            <div class="image">
                <div data-aos="fade-left">
                    <img src="./assets/alumni1.webp" alt="Join SIP">
                </div>
                <div data-aos="fade-left" data-aos-delay="300"> 
                    <img src="./assets/alumni2.webp" alt="Join SIP">
                    <img src="./assets/alumni3.webp" alt="Join SIP">

                </div>
            </div>
        </div>
    </section>


    <section class="common_section faq" id="faq">
        <div class="container">
            <h2 class="common_heading" data-aos="fade-up" >Alumni Help Desk</h2>
            <div class="accordion" data-aos="fade-up" data-aos-delay="300">
                <div class="accordion-item ">
                    <div class="accordion-header">
                        <h3>How do I register as an alumnus on the platform?</h3>
                        <span class="toggle-icon"> <img src="./assets/arrow-up.svg" alt=""> </span>
                    </div>
                    <div class="accordion-content"> 
                        <p>To register, simply fill out the form at the end of this page with your details. Once you're registered, youâ€™ll gain access to our Alumni Network, where you can reconnect, access resources, and stay updated on upcoming events.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-header">
                        <h3>How can I reconnect with my fellow alumni?</h3>
                        <span class="toggle-icon"> <img src="./assets/arrow-up.svg" alt=""> </span>
                    </div>
                    <div class="accordion-content">
                        <p>Once youâ€™re registered, you can easily reconnect with fellow alumni through the SIP Alumni Network. Use search filters by location, class year, or field of interest to find and connect with old friends or mentors.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-header">
                        <h3>How can I update my information in the alumni directory?</h3>
                        <span class="toggle-icon"> <img src="./assets/arrow-up.svg" alt=""> </span>
                    </div>
                    <div class="accordion-content">
                        <p>You can update your details at any time by logging into your profile on the Alumni Network. Keeping your information current helps you stay connected and ensures you're always visible to fellow alumni.</p>
                    </div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-header">
                        <h3>How can I access career opportunities through the alumni network?</h3>
                        <span class="toggle-icon"> <img src="./assets/arrow-up.svg" alt=""> </span>
                    </div>
                    <div class="accordion-content">
                        <p>The Alumni Network offers a Career Connections feature. Once registered, you can explore job opportunities, mentorship, and professional guidance based on your industry, skills, and experience.</p>
                    </div>
                </div>
                <div class="accordion-item">    
                    <div class="accordion-header">
                        <h3>Are there any alumni events or meetups I can attend?</h3>
                        <span class="toggle-icon"> <img src="./assets/arrow-up.svg" alt=""> </span>
                    </div>
                    <div class="accordion-content">
                        <p>Yes! We host exclusive alumni events such as webinars, meetups, and celebrations. Keep an eye on your alumni portal for invitations and details. Registration is easy through the platform.</p>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>


    <footer>
        <div class="container">
<div class="content">
    <a href="https://sipabacus.com/" target="_blank" class="logo">
        <img src="./assets/footer_logo.webp" alt="SIP">
    </a>
    <p class="address">SIP Academy India Pvt. Ltd.,<br>Kences Towers, 7th Floor,<br>1, Ramakrishna Street,<br>Off. North Usman Road, T. Nagar,<br>Chennai - 600017.</p>
    <ul class="contact">
        <li> <span>Phone:</span><a href="tel:044-42023331">044-42023331/</a><a href="tel:044-42605609">42605609</a> </li>
        <li> <span>Email:</span><a href="mailto:sipinfo@sipacademyindia.com">sipinfo@sipacademyindia.com</a></li>
    </ul>
    <div class="social_links">
        <h4>Follow Us</h4>
        <ul>
          <li> <a aria-label="facebook" href="https://www.facebook.com/SIPabacusIndia/" target="_blank"><img src="./assets/facebook.svg" alt=""></a> </li>
          <li> <a aria-label="instagram" href="https://www.instagram.com/sipabacusindia/" target="_blank"><img src="./assets/instagram-icon.svg" alt=""></a> </li>
          <li> <a aria-label="youtube" href="https://www.youtube.com/@sipabacusindia" target="_blank"><img src="./assets/youtube.svg" alt=""></a> </li>
        </ul>
    </div>
</div>

<div class="copyrights" >
    <p>Design & Developed by <a href="https://www.pixel-studios.com/" target="_blank">Pixel Studios.</a><br>Â©<span id="footer_year"></span> SIP Academy India Pvt. Ltd. | All rights reserved.</p>
    <ul class="links">
<!-- <li> <a href="#">Terms</a> </li> -->
<li> <a target="_blank" href="https://sipabacus.com/in/privacy-policy">Privacy Policy</a> </li>

    </ul>
</div>
        </div>
    </footer>

    <a href="#contact" class="mobile_floating_footer common_btn">
        Register as Alumni
    </a>

    <div class="popup">
        <div class="empty"></div>
        <div class="popup_content">
            <button class="popup_close_btn">
                <img src="./assets/close.svg" alt="">
            </button>
            <iframe src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
    </div>

    <!-- Age Confirmation Popup -->
    <div class="age-confirmation-popup" id="age-confirmation-popup">
        <div class="age-popup-overlay"></div>
        <div class="age-popup-content">
            <h3>Age Confirmation</h3>
            <p>Please confirm that you are 18 years or older to complete your registration.</p>
            <div class="age-popup-buttons">
                <button type="button" id="age-confirm-btn" class="common_btn">I am 18 or older</button>
                <button type="button" id="age-cancel-btn" class="age-cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- popup script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let popup = document.querySelector('.popup');
            let popupOverlay = document.querySelector('.empty');
        let popupCloseBtn = document.querySelector('.popup_close_btn');
        let popupFrame = document.querySelector('.popup_content iframe');
        let popupIframeSrc = popupFrame.getAttribute('src');

        let videosBtn = document.querySelectorAll('.play_icon');
        videosBtn.forEach((btn,index) => {
            btn.addEventListener('click', () => {
                popup.classList.add('active');
               const thisVideo =  btn.getAttribute('data-link');
                popupFrame.setAttribute('src', `https://www.youtube.com/embed/${thisVideo}`);
            })
        })

       
        popupOverlay.addEventListener('click', () => {
            popup.classList.remove('active');
            popupFrame.removeAttribute('src');
        })
   

        popupCloseBtn.addEventListener('click', () => {
            popup.classList.remove('active');
            popupFrame.removeAttribute('src');
        })

        })
      
    </script>
 

<script>
    document.addEventListener('DOMContentLoaded', function () {
    const menuBtn = document.querySelector('.menu_btn');
    const nav = document.querySelector('nav');
    const closeBtn = document.querySelector('.close_btn');
    const navLinks = document.querySelectorAll('nav ul li a');

    menuBtn.addEventListener('click', function () {
        nav.classList.add('active');
    });

    closeBtn.addEventListener('click', function () {
        nav.classList.remove('active');
    });

    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            nav.classList.remove('active');
        });
    });

    document.body.addEventListener('click', function (event) {
        if (!nav.contains(event.target) && !menuBtn.contains(event.target)) {
            nav.classList.remove('active');
        }
    });
});
</script>



<script>
// Toast notification function
function showToast(message, type = 'success') {
    const toast = document.createElement('div');
    toast.className = 'toast-notification';
    toast.style.backgroundColor = type === 'success' ? '#10b981' : '#ef4444';
    toast.textContent = message;
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.classList.add('hide');
        setTimeout(() => {
            document.body.removeChild(toast);
        }, 300);
    }, 4000);
}

// Occupation select with search
document.addEventListener('DOMContentLoaded', function() {
    const occupationTrigger = document.getElementById('occupation-trigger');
    const occupationDropdown = document.getElementById('occupation-dropdown');
    const occupationSearch = document.getElementById('occupation-search');
    const occupationOptions = document.getElementById('occupation-options');
    const occupationPlaceholder = document.getElementById('occupation-placeholder');
    const occupationHidden = document.getElementById('occupation');
    const occupationWrapper = document.getElementById('occupation-select-wrapper');
    let allOccupations = [];
    
    if (occupationTrigger && occupationDropdown) {
        // Fetch occupations from API
        fetch('https://sip-admin.designonline.in/api/essentials?required=occupation', {
            method: 'GET',
            headers: {'Content-Type': 'application/json'}
        })
        .then(response => response.json())
        .then(apiData => {
            if (apiData && apiData.data && apiData.data.occupation && Array.isArray(apiData.data.occupation)) {
                allOccupations = apiData.data.occupation.map(occ => occ.name);
                renderOptions(allOccupations);
            }
        })
        .catch(error => {
            // Could not load occupations
        });
        
        // Fetch from database
        fetch('get_occupations.php?q=')
            .then(response => response.json())
            .then(data => {
                if (data && data.length > 0) {
                    allOccupations = [...new Set([...allOccupations, ...data])];
                    renderOptions(allOccupations);
                }
            })
            .catch(() => {});
        
        function renderOptions(occupations, searchQuery = '') {
            occupationOptions.innerHTML = '';
            
            if (searchQuery && occupations.length === 0) {
                const addOption = document.createElement('div');
                addOption.style.cssText = 'padding: 12px 15px; cursor: pointer; color: #249829; font-style: italic;';
                addOption.innerHTML = '<strong>Add:</strong> "' + searchQuery + '"';
                addOption.addEventListener('click', function() {
                    selectOccupation(searchQuery);
                    allOccupations.unshift(searchQuery);
                });
                occupationOptions.appendChild(addOption);
                return;
            }
            
            occupations.forEach(occ => {
                const option = document.createElement('div');
                option.style.cssText = 'padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #f5f5f5;';
                option.textContent = occ;
                option.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#f8f8f8';
                });
                option.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = 'white';
                });
                option.addEventListener('click', function() {
                    selectOccupation(occ);
                });
                occupationOptions.appendChild(option);
            });
        }
        
        function selectOccupation(value) {
            occupationPlaceholder.textContent = value;
            occupationPlaceholder.classList.remove('occupation-placeholder');
            occupationPlaceholder.classList.add('occupation-selected');
            occupationHidden.value = value;
            occupationDropdown.classList.remove('occupation-dropdown-open');
            occupationWrapper.classList.remove('occupation-dropdown-open');
            occupationSearch.value = '';
        }
        
        // Toggle dropdown
        occupationTrigger.addEventListener('click', function(e) {
            e.stopPropagation();
            occupationDropdown.classList.toggle('occupation-dropdown-open');
            occupationWrapper.classList.toggle('occupation-dropdown-open');
            if (occupationDropdown.classList.contains('occupation-dropdown-open')) {
                occupationSearch.focus();
            }
        });
        
        // Search
        occupationSearch.addEventListener('input', function() {
            const query = this.value.trim();
            if (query === '') {
                renderOptions(allOccupations);
            } else {
                const filtered = allOccupations.filter(occ => 
                    occ.toLowerCase().includes(query.toLowerCase())
                );
                renderOptions(filtered, query);
            }
        });
        
        // Close on outside click
        document.addEventListener('click', function(e) {
            if (!occupationTrigger.contains(e.target) && !occupationDropdown.contains(e.target)) {
                occupationDropdown.classList.remove('occupation-dropdown-open');
                occupationWrapper.classList.remove('occupation-dropdown-open');
            }
        });
    }
    
 const levelTrigger = document.getElementById('level-trigger');
const levelDropdown = document.getElementById('level-dropdown');
const levelOptions = document.getElementById('level-options');
const levelPlaceholder = document.getElementById('level-placeholder');
const levelHidden = document.getElementById('level');
const levelWrapper = document.getElementById('level-select-wrapper');

const allLevel = [
  { label: "Advanced 4 / Level 8", value: "advanced_4_level_8" },
  { label: "Grandmaster A", value: "grandmaster_a" },
  { label: "Grandmaster B", value: "grandmaster_b" },
  { label: "Grandmaster C", value: "grandmaster_c" }
];

if (levelTrigger && levelDropdown) {


  allLevel.forEach(level => {
    const option = document.createElement('div');
    option.style.cssText =
      'padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #f5f5f5;';
    option.textContent = level.label;

    option.addEventListener('click', e => {
      e.stopPropagation();
      selectLevel(level);
    });

    levelOptions.appendChild(option);
  });

  function selectLevel(level) {
    levelPlaceholder.textContent = level.label;
    levelPlaceholder.classList.remove('level-placeholder');
    levelPlaceholder.classList.add('level-selected');
    levelHidden.value = level.value;

    levelDropdown.classList.remove('level-dropdown-open');
    levelWrapper.classList.remove('level-dropdown-open');
  }

  levelTrigger.addEventListener('click', e => {

    e.stopPropagation();

    levelDropdown.classList.toggle('level-dropdown-open');
    levelWrapper.classList.toggle('level-dropdown-open');
  });

  levelDropdown.addEventListener('click', e => {
    e.stopPropagation();
  });

  document.addEventListener('click', () => {
    levelDropdown.classList.remove('level-dropdown-open');
    levelWrapper.classList.remove('level-dropdown-open');
  });
}



    // Custom State Dropdown
    const stateTrigger = document.getElementById('state-trigger');
    const stateDropdown = document.getElementById('state-dropdown');
    const stateOptions = document.getElementById('state-options');
    const statePlaceholder = document.getElementById('state-placeholder');
    const stateHidden = document.getElementById('state');
    const stateWrapper = document.getElementById('state-select-wrapper');
    let allStates = [];
    
    if (stateTrigger && stateDropdown) {
        function renderStateOptions(states) {
            stateOptions.innerHTML = '';
            
            states.forEach(state => {
                const option = document.createElement('div');
                option.style.cssText = 'padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #f5f5f5;';
                option.textContent = state.name || state.state_name;
                option.dataset.stateId = state.id;
                option.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#f8f8f8';
                });
                option.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = 'white';
                });
                option.addEventListener('click', function() {
                    selectState(state.id, state.name || state.state_name);
                });
                stateOptions.appendChild(option);
            });
        }
        
        function selectState(stateId, stateName) {
         
            statePlaceholder.textContent = stateName;
            statePlaceholder.classList.remove('state-placeholder');
            statePlaceholder.classList.add('state-selected');
            stateHidden.value = stateId;
            stateDropdown.classList.remove('state-dropdown-open');
            stateWrapper.classList.remove('state-dropdown-open');
            
            // Trigger city loading for custom dropdown
            // Show loading state directly
            const cityPlaceholder = document.getElementById('city-placeholder');
            const cityTrigger = document.getElementById('city-trigger');
            const cityHidden = document.getElementById('city');
            
            if (cityPlaceholder && cityTrigger) {
                cityPlaceholder.textContent = 'Loading cities...';
                cityTrigger.classList.add('disabled');
                cityPlaceholder.classList.remove('city-selected');
                cityPlaceholder.classList.add('city-placeholder');
                cityHidden.value = '';
            }
            
            fetch(`https://sip-admin.designonline.in/api/essentials?required=city&state_id=${stateId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(apiData => {
                let cities = [];
                
                // Check for city.normal structure
                if (apiData && apiData.data && apiData.data.city) {
                    if (apiData.data.city.normal && Array.isArray(apiData.data.city.normal)) {
                        cities = apiData.data.city.normal;
                    } else if (Array.isArray(apiData.data.city)) {
                        cities = apiData.data.city;
                    }
                }
                
                if (cities.length > 0) {
                    allCities = cities;
                    
                    // Populate city options
                    const cityOptions = document.getElementById('city-options');
                    if (cityOptions) {
                        cityOptions.innerHTML = '';
                        
                        cities.forEach(city => {
                            const option = document.createElement('div');
                            option.style.cssText = 'padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #f5f5f5;';
                            option.textContent = city.name;
                            option.dataset.cityId = city.id;
                            option.addEventListener('mouseenter', function() {
                                this.style.backgroundColor = '#f8f8f8';
                            });
                            option.addEventListener('mouseleave', function() {
                                this.style.backgroundColor = 'white';
                            });
                            option.addEventListener('click', function() {
                                // Select city function inline
                                const cityPlaceholder = document.getElementById('city-placeholder');
                                const cityHidden = document.getElementById('city');
                                const cityDropdown = document.getElementById('city-dropdown');
                                const cityWrapper = document.getElementById('city-select-wrapper');
                                
                                cityPlaceholder.textContent = city.name;
                                cityPlaceholder.classList.remove('city-placeholder');
                                cityPlaceholder.classList.add('city-selected');
                                cityHidden.value = city.id;
                                cityDropdown.classList.remove('city-dropdown-open');
                                cityWrapper.classList.remove('city-dropdown-open');
                                
                                // Handle normal city selection
                                const cityOtherWrapper = document.querySelector('.city-other-wrapper');
                                cityOtherWrapper.style.display = 'none';
                                document.getElementById('city_other').value = '';
                            });
                            cityOptions.appendChild(option);
                        });
                        
                        // Add "Others" option
                        // const otherOption = document.createElement('div');
                        // otherOption.style.cssText = 'padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #f5f5f5; font-style: italic; color: #666;';
                        // // otherOption.textContent = 'Others';
                        // otherOption.addEventListener('mouseenter', function() {
                        //     this.style.backgroundColor = '#f8f8f8';
                        // });
                        // otherOption.addEventListener('mouseleave', function() {
                        //     this.style.backgroundColor = 'white';
                        // });
                        // otherOption.addEventListener('click', function() {
                        //     // Select "Others" function inline
                        //     const cityPlaceholder = document.getElementById('city-placeholder');
                        //     const cityHidden = document.getElementById('city');
                        //     const cityDropdown = document.getElementById('city-dropdown');
                        //     const cityWrapper = document.getElementById('city-select-wrapper');
                            
                        //     // cityPlaceholder.textContent = 'Others';
                        //     cityPlaceholder.classList.remove('city-placeholder');
                        //     cityPlaceholder.classList.add('city-selected');
                        //     // cityHidden.value = 'others';
                        //     cityDropdown.classList.remove('city-dropdown-open');
                        //     cityWrapper.classList.remove('city-dropdown-open');
                            
                        //     // Show city input field
                        //     const cityOtherWrapper = document.querySelector('.city-other-wrapper');
                        //     cityOtherWrapper.style.display = 'block';
                        // });
                        // cityOptions.appendChild(otherOption);
                    }
                    
                    // Enable city dropdown
                    if (cityTrigger) {
                        cityTrigger.classList.remove('disabled');
                    }
                    
                    // Reset city selection
                    if (cityPlaceholder) {
                        cityPlaceholder.textContent = 'Select City';
                        cityPlaceholder.classList.remove('city-selected');
                        cityPlaceholder.classList.add('city-placeholder');
                        cityHidden.value = '';
                    }
                } else {
                    if (cityPlaceholder) {
                        cityPlaceholder.textContent = 'No data found';
                    }
                    if (cityTrigger) {
                        cityTrigger.classList.add('disabled');
                    }
                }
            })
            .catch(error => {
                // API unavailable
                if (cityPlaceholder) {
                    cityPlaceholder.textContent = 'No data found';
                }
                if (cityTrigger) {
                    cityTrigger.classList.add('disabled');
                }
            });
        }
        
        // Toggle dropdown
        stateTrigger.addEventListener('click', function(e) {
            e.stopPropagation();
            stateDropdown.classList.toggle('state-dropdown-open');
            stateWrapper.classList.toggle('state-dropdown-open');
        });
        
        // Close on outside click
        document.addEventListener('click', function(e) {
            if (!stateTrigger.contains(e.target) && !stateDropdown.contains(e.target)) {
                stateDropdown.classList.remove('state-dropdown-open');
                stateWrapper.classList.remove('state-dropdown-open');
            }
        });
    }

    // Custom City Dropdown
    const cityTrigger = document.getElementById('city-trigger');
    const cityDropdown = document.getElementById('city-dropdown');
    const cityOptions = document.getElementById('city-options');
    const cityPlaceholder = document.getElementById('city-placeholder');
    const cityHidden = document.getElementById('city');
    const cityWrapper = document.getElementById('city-select-wrapper');
    let allCities = [];
      
    if (cityTrigger && cityDropdown) {


        if (cityOptions) {
            cityOptions.addEventListener('click', function(e) {
                const clickedOption = e.target;
                if (clickedOption && clickedOption.dataset && clickedOption.dataset.cityId) {
                    const cityId = clickedOption.dataset.cityId;
                    const cityName = clickedOption.textContent;

                    if (cityId && cityId !== 'others') {
                        loadPincodes(cityId);
                    }

                    if (cityPlaceholder) {
                        cityPlaceholder.textContent = cityName;
                        cityPlaceholder.classList.remove('city-placeholder');
                        cityPlaceholder.classList.add('city-selected');
                    }
                    if (cityHidden) {
                        cityHidden.value = cityId;
                    }

                    cityWrapper.classList.remove('city-dropdown-open');
                }
            });
        }
        
        // Pincode loading function
        function loadPincodes(cityId) {
            
            const pincodeWrapper = document.querySelector('.pincode-wrapper');
            const pincodePlaceholder = document.getElementById('pincode-placeholder');
            const pincodeOptions = document.getElementById('pincode-options');
            
            if (pincodePlaceholder) {
                pincodePlaceholder.textContent = 'Loading pincodes...';
            }
            
            if (pincodeWrapper) {
                pincodeWrapper.style.display = 'block';
            }
            
            fetch(`https://sip-admin.designonline.in/api/essentials?required=pincode&city_id=${cityId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                return response.json();
            })
            .then(apiData => {
              
                let pincodes = [];
                if (apiData && apiData.data && apiData.data.pincode && Array.isArray(apiData.data.pincode)) {
                    pincodes = apiData.data.pincode;
                }
                
             
                
                if (pincodes.length > 0 && pincodeOptions) {
                    pincodeOptions.innerHTML = '';
                    
                    pincodes.forEach(pincode => {
                        const option = document.createElement('div');
                        option.className = 'pincode-option';
                        option.textContent = pincode.pincode || pincode.name || pincode;
                        option.dataset.pincodeId = pincode.id || pincode.pincode || pincode;
                        
                        option.addEventListener('click', function() {
                            const pincodeId = this.dataset.pincodeId;
                            const pincodeName = this.textContent;
                            
                            if (pincodePlaceholder) {
                                pincodePlaceholder.textContent = pincodeName;
                                pincodePlaceholder.classList.remove('pincode-placeholder');
                                pincodePlaceholder.classList.add('pincode-selected');
                            }
                            
                            const pincodeHidden = document.getElementById('pincode');
                            if (pincodeHidden) {
                                pincodeHidden.value = pincodeId;
                            }
                            
                            if (pincodeWrapper) {
                                pincodeWrapper.classList.remove('pincode-dropdown-open');
                            }
                            
                 
                            loadCenterLocations(pincodeId);
                        });
                        
                        pincodeOptions.appendChild(option);
                    });
                    
                    if (pincodePlaceholder) {
                        pincodePlaceholder.textContent = 'Select Pincode';
                        pincodePlaceholder.classList.remove('pincode-placeholder');
                        pincodePlaceholder.classList.add('pincode-placeholder');
                    }
                    
                    const pincodeTrigger = document.getElementById('pincode-trigger');
                    if (pincodeTrigger) {
                        pincodeTrigger.classList.remove('disabled');
                    }
                } else {
                    if (pincodePlaceholder) {
                        pincodePlaceholder.textContent = 'No pincodes available';
                    }
                    if (pincodeOptions) {
                        pincodeOptions.innerHTML = '';
                    }
                }
            })
            .catch(error => {

                if (pincodePlaceholder) {
                    pincodePlaceholder.textContent = 'Error loading pincodes';
                }
            });
        }
        
        // Center Location loading function
        function loadCenterLocations(pincodeId) {

            
            const centerLocationWrapper = document.querySelector('.center-location-wrapper');
            const centerLocationPlaceholder = document.getElementById('center-location-placeholder');
            const centerLocationOptions = document.getElementById('center-location-options');
            const centerLocationTrigger = document.getElementById('center-location-trigger');
            
            if (centerLocationPlaceholder) {
                centerLocationPlaceholder.textContent = 'Loading center locations...';
            }
            
            if (centerLocationWrapper) {
                centerLocationWrapper.style.display = 'block';
            }
            
            if (centerLocationTrigger) {
                centerLocationTrigger.classList.add('disabled');
            }
            
            fetch(`https://sip-admin.designonline.in/api/essentials?required=center_location&pincode_id=${pincodeId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {

                return response.json();
            })
            .then(apiData => {
                
                let centerLocations = [];
                if (apiData && apiData.data && apiData.data.center_location) {
                    // Handle the correct API structure with normal and others arrays
                    if (apiData.data.center_location.normal && Array.isArray(apiData.data.center_location.normal)) {
                        centerLocations = apiData.data.center_location.normal;
                    } else if (Array.isArray(apiData.data.center_location)) {
                        centerLocations = apiData.data.center_location;
                    }
                }

                if (centerLocationOptions) {
                    centerLocationOptions.innerHTML = '';
                    
                    // Add center location options from normal array
                    centerLocations.forEach(location => {
                        const option = document.createElement('div');
                        option.className = 'center-location-option';
                        option.textContent = location.name || location.location || location;
                        option.dataset.locationId = location.id || location.name || location;
                        
                        option.addEventListener('click', function() {
                            selectCenterLocation(this.dataset.locationId, this.textContent);
                        });
                        
                        centerLocationOptions.appendChild(option);
                    });
                    
                    // Always add "Others" option at the end
                    const othersOption = document.createElement('div');
                    othersOption.className = 'center-location-option others-option';
                    othersOption.textContent = 'Others';
                    othersOption.dataset.locationId = 'others';
                    
                    othersOption.addEventListener('click', function() {
                        selectCenterLocation('others', 'Others');
                    });
                    
                    centerLocationOptions.appendChild(othersOption);
                    
                    if (centerLocationPlaceholder) {
                        centerLocationPlaceholder.textContent = 'Select Center Location';
                        centerLocationPlaceholder.classList.remove('center-location-placeholder');
                        centerLocationPlaceholder.classList.add('center-location-placeholder');
                    }
                    
                    if (centerLocationTrigger) {
                        centerLocationTrigger.classList.remove('disabled');
                    }
                }
            })
            .catch(error => {

                if (centerLocationPlaceholder) {
                    centerLocationPlaceholder.textContent = 'Error loading center locations';
                }
            });
        }
        
        // Center Location selection function
        function selectCenterLocation(locationId, locationName) {

            const centerLocationPlaceholder = document.getElementById('center-location-placeholder');
            const centerLocationHidden = document.getElementById('center_location');
            const centerLocationWrapper = document.querySelector('.center-location-wrapper');
            const centerLocationOtherWrapper = document.querySelector('.center-location-other-wrapper');
            
            if (centerLocationPlaceholder) {
                centerLocationPlaceholder.textContent = locationName;
                centerLocationPlaceholder.classList.remove('center-location-placeholder');
                centerLocationPlaceholder.classList.add('center-location-selected');
            }
            
            if (centerLocationHidden) {
                centerLocationHidden.value = locationId;
            }
            
            if (centerLocationWrapper) {
                centerLocationWrapper.classList.remove('center-location-dropdown-open');
            }
            
            // Handle "Others" option
            if (locationId === 'others') {
                if (centerLocationOtherWrapper) {
                    centerLocationOtherWrapper.style.display = 'block';
                }
            } else {
                if (centerLocationOtherWrapper) {
                    centerLocationOtherWrapper.style.display = 'none';
                    const centerLocationOtherInput = document.getElementById('center_location_other');
                    if (centerLocationOtherInput) {
                        centerLocationOtherInput.value = '';
                    }
                }
            }
        }
        
        function renderCityOptions(cities) {

            cityOptions.innerHTML = '';
            
            cities.forEach(city => {

                const option = document.createElement('div');
                option.style.cssText = 'padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #f5f5f5;';
                option.textContent = city.name;
                option.dataset.cityId = city.id;
                option.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#f8f8f8';
                });
                option.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = 'white';
                });
                option.addEventListener('click', function() {

                    selectCity(city.id, city.name);
                });
                cityOptions.appendChild(option);
            });
        }
        
     function selectCity(cityId, cityName) {

    cityPlaceholder.textContent = cityName;
    cityPlaceholder.classList.remove('city-placeholder');
    cityPlaceholder.classList.add('city-selected');
    cityHidden.value = cityId;
    cityDropdown.classList.remove('city-dropdown-open');
    cityWrapper.classList.remove('city-dropdown-open');

    // Load pincodes for selected city
    if (typeof fetchPincodes === 'function') {
        fetchPincodes(cityId);
    }
}

        
        function enableCityDropdown() {
            cityTrigger.classList.remove('disabled');
        }
        
        function disableCityDropdown() {
            cityTrigger.classList.add('disabled');
            cityPlaceholder.textContent = 'Select City';
            cityPlaceholder.classList.remove('city-selected');
            cityPlaceholder.classList.add('city-placeholder');
            cityHidden.value = '';
            cityDropdown.classList.remove('city-dropdown-open');
            cityWrapper.classList.remove('city-dropdown-open');
        }
        
        function showCityLoading() {
            cityPlaceholder.textContent = 'Loading cities...';
            disableCityDropdown();
        }
        
        // Toggle dropdown
        cityTrigger.addEventListener('click', function(e) {
            if (!this.classList.contains('disabled')) {
                e.stopPropagation();
                cityDropdown.classList.toggle('city-dropdown-open');
                cityWrapper.classList.toggle('city-dropdown-open');
            }
        });
        
        // Close on outside click
        document.addEventListener('click', function(e) {
            if (!cityTrigger.contains(e.target) && !cityDropdown.contains(e.target)) {
                cityDropdown.classList.remove('city-dropdown-open');
                cityWrapper.classList.remove('city-dropdown-open');
            }
        });
        
        // Initially disable city dropdown
        disableCityDropdown();
    }

    // Fetch and populate states dropdown
    const citySelect = document.getElementById('city');
    const cityOtherInput = document.getElementById('city_other');
    const cityOtherSuggestions = document.getElementById('city-other-suggestions');
    let otherCities = [];
    
    if (citySelect) {
        
        const populateStates = (states) => {
            allStates = states;
            if (stateOptions && renderStateOptions) {
                renderStateOptions(states);
            }
        };
        
        const fetchCities = (stateId) => {

            citySelect.innerHTML = '<option value="" disabled selected>Loading cities...</option>';
            citySelect.disabled = true;
            
            fetch(`https://sip-admin.designonline.in/api/essentials?required=city&state_id=${stateId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(apiData => {
                citySelect.innerHTML = '<option value="" disabled selected>Select City</option>';
                
                let cities = [];
                
                // Check for city.normal structure
                if (apiData && apiData.data && apiData.data.city) {
                    if (apiData.data.city.normal && Array.isArray(apiData.data.city.normal)) {
                        cities = apiData.data.city.normal;
                    } else if (Array.isArray(apiData.data.city)) {
                        cities = apiData.data.city;
                    }
                    
                    // Store others cities for autocomplete
                    if (apiData.data.city.others && Array.isArray(apiData.data.city.others)) {
                        otherCities = apiData.data.city.others;
                    }
                }
                
                if (cities.length > 0) {
                    cities.forEach(city => {
                        const option = document.createElement('option');
                        option.value = city.id;
                        option.textContent = city.name;
                        citySelect.appendChild(option);
                    });
                    
                    citySelect.disabled = false;
                } else {
                    citySelect.innerHTML = '<option value="" disabled selected>No data found</option>';
                    citySelect.disabled = true;
                }
            })
            .catch(error => {
                // API unavailable
                citySelect.innerHTML = '<option value="" disabled selected>No data found</option>';
                citySelect.disabled = true;
            });
        };
        
        // Load states on page load
        fetch('https://sip-admin.designonline.in/api/essentials?required=state', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(apiData => {
            if (apiData && apiData.data && apiData.data.state && Array.isArray(apiData.data.state)) {
                const states = apiData.data.state;
                populateStates(states);
            }
        })
        .catch(error => {

        });
        
        // State selection is now handled in the custom dropdown selectState function
        
        // City Other Autocomplete
        if (cityOtherInput && cityOtherSuggestions) {
            cityOtherInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                
                if (query.length < 1) {
                    cityOtherSuggestions.classList.remove('show');
                    cityOtherSuggestions.innerHTML = '';
                    return;
                }
                
                // Filter other cities based on query
                const filtered = otherCities.filter(city => 
                    city.name.toLowerCase().includes(query)
                );
                
                if (filtered.length > 0) {
                    cityOtherSuggestions.innerHTML = '';
                    filtered.forEach(city => {
                        const item = document.createElement('div');
                        item.className = 'city-other-suggestion-item';
                        item.textContent = city.name;
                        item.addEventListener('click', function() {
                            cityOtherInput.value = city.name;
                            cityOtherSuggestions.classList.remove('show');
                            cityOtherSuggestions.innerHTML = '';
                        });
                        cityOtherSuggestions.appendChild(item);
                    });
                    cityOtherSuggestions.classList.add('show');
                } else {
                    cityOtherSuggestions.classList.remove('show');
                    cityOtherSuggestions.innerHTML = '';
                }
            });
            
            // Close suggestions on outside click
            document.addEventListener('click', function(e) {
                if (!cityOtherInput.contains(e.target) && !cityOtherSuggestions.contains(e.target)) {
                    cityOtherSuggestions.classList.remove('show');
                }
            });
        }
        
        // Handle city "Other" option - DISABLED (Others option removed)
        /*
        citySelect.addEventListener('change', function() {
            const cityOtherWrapper = document.querySelector('.city-other-wrapper');
            if (this.value === 'others') {
                cityOtherWrapper.style.display = 'block';
            } else {
                cityOtherWrapper.style.display = 'none';
                cityOtherInput.value = '';
                cityOtherSuggestions.classList.remove('show');
            }
        });
        */
    }
    
    // Pincode Dropdown Functionality
    const pincodeWrapper = document.querySelector('.pincode-wrapper');
    const pincodeTrigger = document.getElementById('pincode-trigger');
    const pincodeDropdown = document.getElementById('pincode-dropdown');
    const pincodeOptions = document.getElementById('pincode-options');
    const pincodePlaceholder = document.getElementById('pincode-placeholder');
    const pincodeHidden = document.getElementById('pincode');
    
    // if (pincodeWrapper && pincodeTrigger && pincodeOptions) {
    if (pincodeWrapper && pincodeTrigger && pincodeOptions) {
        
        function fetchPincodes(cityId) {

            if (!cityId || cityId === 'others') {
                hidePincodeDropdown();
                return;
            }
            
            showPincodeLoading();
            
            fetch(`https://sip-admin.designonline.in/api/essentials?required=pincode&city_id=${cityId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(apiData => {
                let pincodes = [];
                
                if (apiData && apiData.data && apiData.data.pincode && Array.isArray(apiData.data.pincode)) {
                    pincodes = apiData.data.pincode;
                }
                
                if (pincodes.length > 0) {
                    renderPincodeOptions(pincodes);
                    enablePincodeDropdown();
                    showPincodeDropdown();
                } else {
                    hidePincodeDropdown();
                }
            })
            .catch(error => {
                // API unavailable
                hidePincodeDropdown();
            });
        }
        
        function renderPincodeOptions(pincodes) {
            pincodeOptions.innerHTML = '';
            
            pincodes.forEach(pincode => {
                const option = document.createElement('div');
                option.className = 'pincode-option';
                option.textContent = pincode.pincode || pincode.name || pincode;
                option.setAttribute('data-pincode-id', pincode.id || pincode.pincode || pincode);
                option.addEventListener('click', function() {
                    selectPincode(pincode.id || pincode.pincode || pincode, pincode.pincode || pincode.name || pincode);
                });
                pincodeOptions.appendChild(option);
            });
        }
        
        function selectPincode(pincodeId, pincodeName) {
            pincodePlaceholder.textContent = pincodeName;
            pincodePlaceholder.classList.remove('pincode-placeholder');
            pincodePlaceholder.classList.add('pincode-selected');
            pincodeHidden.value = pincodeId;
            pincodeDropdown.classList.remove('pincode-dropdown-open');
            pincodeWrapper.classList.remove('pincode-dropdown-open');
        }
        
        function enablePincodeDropdown() {
            pincodeTrigger.classList.remove('disabled');
        }
        
        function disablePincodeDropdown() {
            pincodeTrigger.classList.add('disabled');
            pincodePlaceholder.textContent = 'Select Pincode';
            pincodePlaceholder.classList.remove('pincode-selected');
            pincodePlaceholder.classList.add('pincode-placeholder');
            pincodeHidden.value = '';
            pincodeDropdown.classList.remove('pincode-dropdown-open');
            pincodeWrapper.classList.remove('pincode-dropdown-open');
        }
        
        function showPincodeLoading() {
            pincodePlaceholder.textContent = 'Loading pincodes...';
            disablePincodeDropdown();
        }
        
        function showPincodeDropdown() {
            pincodeWrapper.style.display = 'block';
        }
        
        function hidePincodeDropdown() {
            pincodeWrapper.style.display = 'none';
            disablePincodeDropdown();
        }
        
        // Toggle dropdown
        pincodeTrigger.addEventListener('click', function(e) {
            if (!this.classList.contains('disabled')) {
                e.stopPropagation();
                const isOpen = pincodeWrapper.classList.contains('pincode-dropdown-open');
                
                // Close all other dropdowns
                document.querySelectorAll('.state-select-wrapper, .city-wrapper, .occupation-select-wrapper').forEach(wrapper => {
                    wrapper.classList.remove('state-dropdown-open', 'city-dropdown-open', 'occupation-dropdown-open');
                });
                
                if (isOpen) {
                    pincodeWrapper.classList.remove('pincode-dropdown-open');
                } else {
                    pincodeWrapper.classList.add('pincode-dropdown-open');
                }
            }
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!pincodeWrapper.contains(e.target)) {
                pincodeWrapper.classList.remove('pincode-dropdown-open');
            }
        });
    }
    
    // Center Location Dropdown Event Listeners
    const centerLocationWrapper = document.querySelector('.center-location-wrapper');
    const centerLocationTrigger = document.getElementById('center-location-trigger');
    
    if (centerLocationWrapper && centerLocationTrigger) {
        // Toggle dropdown
        centerLocationTrigger.addEventListener('click', function(e) {
            if (!this.classList.contains('disabled')) {
                e.stopPropagation();
                const isOpen = centerLocationWrapper.classList.contains('center-location-dropdown-open');
                
                // Close all other dropdowns
                document.querySelectorAll('.state-select-wrapper, .city-wrapper, .occupation-select-wrapper, .pincode-wrapper').forEach(wrapper => {
                    wrapper.classList.remove('state-dropdown-open', 'city-dropdown-open', 'occupation-dropdown-open', 'pincode-dropdown-open');
                });
                
                if (isOpen) {
                    centerLocationWrapper.classList.remove('center-location-dropdown-open');
                } else {
                    centerLocationWrapper.classList.add('center-location-dropdown-open');
                }
            }
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!centerLocationWrapper.contains(e.target)) {
                centerLocationWrapper.classList.remove('center-location-dropdown-open');
            }
        });
    }
    
    // Level Completed Dropdown Event Listeners
    const levelCompletedWrapper = document.querySelector('.level-completed-wrapper');
    const levelCompletedTrigger = document.getElementById('level-completed-trigger');
    const levelCompletedOptions = document.querySelectorAll('.level-completed-option');
    const levelCompletedPlaceholder = document.getElementById('level-completed-placeholder');
    const levelCompletedHidden = document.getElementById('level_completed');
    
    if (levelCompletedWrapper && levelCompletedTrigger) {
        // Toggle dropdown
        levelCompletedTrigger.addEventListener('click', function(e) {
            e.stopPropagation();
            const isOpen = levelCompletedWrapper.classList.contains('level-completed-dropdown-open');
            
            // Close all other dropdowns
            document.querySelectorAll('.state-select-wrapper, .city-wrapper, .occupation-select-wrapper, .pincode-wrapper, .center-location-wrapper').forEach(wrapper => {
                wrapper.classList.remove('state-dropdown-open', 'city-dropdown-open', 'occupation-dropdown-open', 'pincode-dropdown-open', 'center-location-dropdown-open');
            });
            
            if (isOpen) {
                levelCompletedWrapper.classList.remove('level-completed-dropdown-open');
            } else {
                levelCompletedWrapper.classList.add('level-completed-dropdown-open');
            }
        });
        
        // Handle option selection
        levelCompletedOptions.forEach(option => {
            option.addEventListener('click', function() {
                const levelValue = this.dataset.level;
                const levelText = this.textContent;
                
                // Update placeholder
                if (levelCompletedPlaceholder) {
                    levelCompletedPlaceholder.textContent = levelText;
                    levelCompletedPlaceholder.classList.remove('level-completed-placeholder');
                    levelCompletedPlaceholder.classList.add('level-completed-selected');
                }
                
                // Update hidden input
                if (levelCompletedHidden) {
                    levelCompletedHidden.value = levelValue;
                }
                
                // Remove selected class from all options
                levelCompletedOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Add selected class to clicked option
                this.classList.add('selected');
                
                // Close dropdown
                levelCompletedWrapper.classList.remove('level-completed-dropdown-open');
            });
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!levelCompletedWrapper.contains(e.target)) {
                levelCompletedWrapper.classList.remove('level-completed-dropdown-open');
            }
        });
    }
    
    // Location Selection (India/Outside India) Functionality
    const locationIndiaRadio = document.getElementById('location-india');
    const locationOutsideIndiaRadio = document.getElementById('location-outside-india');
    const mobileVerifyWrapper = document.querySelector('.mobile-verify-wrapper');
    const emailVerifyWrapper = document.querySelector('.email-verify-wrapper');
    
    // Function to disable location radio buttons after verification
    function disableLocationSelection() {
        if (locationIndiaRadio) {
            locationIndiaRadio.disabled = true;
        }
        if (locationOutsideIndiaRadio) {
            locationOutsideIndiaRadio.disabled = true;
        }
        
        // Add visual indication that they're disabled
        const locationWrapper = document.querySelector('.location-selection-wrapper');
        if (locationWrapper) {
            locationWrapper.classList.add('disabled');
        }
    }
    
    // Function to enable location radio buttons (for edit functionality)
    function enableLocationSelection() {
        if (locationIndiaRadio) {
            locationIndiaRadio.disabled = false;
        }
        if (locationOutsideIndiaRadio) {
            locationOutsideIndiaRadio.disabled = false;
        }
        
        // Remove visual indication
        const locationWrapper = document.querySelector('.location-selection-wrapper');
        if (locationWrapper) {
            locationWrapper.classList.remove('disabled');
        }
    }
    const regularEmailInput = document.querySelector('.regular-email-input');
    const verifyMobileBtn = document.getElementById('verify-mobile-btn');
    const verifyEmailBtn = document.getElementById('verify-email-btn');
    const otpInputLocation = document.getElementById('otp-input');
    const emailInputInWrapper = document.querySelector('.email-input');
    
    let currentVerificationMode = 'mobile'; // 'mobile' for India (0), 'email' for Outside India (1)
    
    // Function to switch UI based on location selection
    function switchLocationUI(locationType) {

        if (locationType === '0') { // India
            currentVerificationMode = 'mobile';
            
            // Show India UI: regular email + mobile verify wrapper
            if (regularEmailInput) regularEmailInput.style.display = 'block';
            if (mobileVerifyWrapper) mobileVerifyWrapper.style.display = 'flex';
            
            // Show verify mobile button for India
            if (verifyMobileBtn) {
                verifyMobileBtn.style.display = 'inline-block';
                verifyMobileBtn.disabled = true; // Start disabled, will be enabled by input validation
            }
            
            // Hide Outside India UI: email verify wrapper
            if (emailVerifyWrapper) emailVerifyWrapper.style.display = 'none';
            
            // Update button text
            if (verifyMobileBtn) verifyMobileBtn.textContent = 'Verify Mobile';
            if (otpInputLocation) otpInputLocation.placeholder = 'Enter Mobile OTP';
            
            // Country Code Logic for India
            const countryCodeWrapper = document.querySelector('.country-code-wrapper');
            const countryCodeSelect = document.getElementById('country-code-select');
            const mobileInput = document.getElementById('mobile-number');
            
            if (countryCodeSelect) {
                countryCodeSelect.value = '+91';
                countryCodeSelect.disabled = true;
            }
            
            if (mobileInput) {
                mobileInput.placeholder = 'Contact Number';
                mobileInput.maxLength = '10';
            }
            
            if (countryCodeWrapper) {
                countryCodeWrapper.classList.add('disabled');
            }

            
        } else if (locationType === '1') { // Outside India
            currentVerificationMode = 'email';
            
            // Show Outside India UI: email verify wrapper
            if (emailVerifyWrapper) {
                emailVerifyWrapper.style.display = 'flex';
                if (verifyEmailBtn) {
                    verifyEmailBtn.disabled = true; // Start disabled, will be enabled by input validation
                }
            }
            
            // Hide regular email input
            if (regularEmailInput) regularEmailInput.style.display = 'none';
            
            // Keep mobile verify wrapper visible but hide only the verify button
            if (mobileVerifyWrapper) {
                mobileVerifyWrapper.style.display = 'flex';
                // Hide only the verify mobile button
                if (verifyMobileBtn) verifyMobileBtn.style.display = 'none';
            }
            
            // Update button text
            if (verifyEmailBtn) verifyEmailBtn.textContent = 'Verify Email';
            if (otpInputLocation) otpInputLocation.placeholder = 'Enter Email OTP';
            
            // Country Code Logic for Outside India
            const countryCodeWrapper = document.querySelector('.country-code-wrapper');
            const countryCodeSelect = document.getElementById('country-code-select');
            const mobileInput = document.getElementById('mobile-number');
            
            if (countryCodeSelect) {
                countryCodeSelect.disabled = false;
            }
            
            if (mobileInput) {
                mobileInput.placeholder = 'Contact Number';
                mobileInput.maxLength = '15';
            }
            
            if (countryCodeWrapper) {
                countryCodeWrapper.classList.remove('disabled');
            }

        }
        
        // Reset verification status when switching
        resetVerificationStatus();
    }
    
    // Event listeners for radio buttons
    if (locationIndiaRadio && locationOutsideIndiaRadio) {
        locationIndiaRadio.addEventListener('change', function() {
            if (this.checked) {
                switchLocationUI('0');
            }
        });
        
        locationOutsideIndiaRadio.addEventListener('change', function() {
            if (this.checked) {
                switchLocationUI('1');
            }
        });
    }
    
    // Initialize with default selection (India)
    switchLocationUI('0');
    
    // Function to format mobile number based on location and country code
    function formatMobileNumber(input) {
        const selectedLocationElement = document.querySelector('input[name="location_type"]:checked');
        if (!selectedLocationElement) return;
        
        const selectedLocation = selectedLocationElement.value;
        let value = input.value.replace(/[^0-9]/g, '');
        
        if (selectedLocation === '0') { // India
            // India: 10 digits max
            value = value.slice(0, 10);
        } else { // Outside India
            // Outside India: 7-15 digits
            value = value.slice(0, 15);
        }
        
        input.value = value;
        
        // Update mobile number validation
        updateMobileVerifyButtonState();
    }
    
    // Function to get full mobile number with country code
    function getFullMobileNumber() {
        const countryCodeSelect = document.getElementById('country-code-select');
        const mobileInput = document.getElementById('mobile-number');
        if (!countryCodeSelect || !mobileInput) return '';
        return countryCodeSelect.value + mobileInput.value.trim();
    }
    
    // Function to update mobile verify button state
    function updateMobileVerifyButtonState() {
        const verifyBtn = document.getElementById('verify-mobile-btn');
        const mobileInput = document.getElementById('mobile-number');
        if (!verifyBtn || !mobileInput) return;
        
        const selectedLocationElement = document.querySelector('input[name="location_type"]:checked');
        if (!selectedLocationElement) return;
        
        const selectedLocation = selectedLocationElement.value;
        const mobileNumber = mobileInput.value.trim();
        const isReadOnly = mobileInput.readOnly;
        
        let isValidLength = false;
        
        if (selectedLocation === '0') { // India
            isValidLength = mobileNumber.length === 10;
        } else { // Outside India
            isValidLength = mobileNumber.length >= 7 && mobileNumber.length <= 15;
        }
        
        // Enable verify button if valid length and not readonly
        if (isReadOnly) {
            verifyBtn.disabled = true;
        } else if (!isValidLength) {
            verifyBtn.disabled = true;
        } else {
            verifyBtn.disabled = false;
        }
    }
    
    // Make formatMobileNumber globally available
    window.formatMobileNumber = formatMobileNumber;
    
    // Add input validation for mobile number with country code awareness
    const mobileInputField = document.getElementById('mobile-number');
    if (mobileInputField) {
        mobileInputField.addEventListener('input', function() {
            formatMobileNumber(this);
        });
    }
    
    // Country code change handler
    const countryCodeSelect = document.getElementById('country-code-select');
    if (countryCodeSelect) {
        countryCodeSelect.addEventListener('change', function() {
            // Prevent changes when in India mode
            const selectedLocationElement = document.querySelector('input[name="location_type"]:checked');
            if (!selectedLocationElement) return;
            
            const selectedLocation = selectedLocationElement.value;
            if (selectedLocation === '0') { // India
                // Force back to +91 if somehow changed
                this.value = '+91';
                return;
            }
            
            // Update mobile number validation when country code changes
            updateMobileVerifyButtonState();
            
            // Clear mobile number if switching country codes to avoid confusion
            if (selectedLocation === '1') { // Outside India
                const mobileInput = document.getElementById('mobile-number');
                if (mobileInput && !mobileInput.readOnly) {
                    mobileInput.value = '';
                    updateMobileVerifyButtonState();
                }
            }
        });
    }
    
    // Add input validation for email (Outside India mode)
    if (emailInputInWrapper) {
        emailInputInWrapper.addEventListener('input', function() {
            if (currentVerificationMode === 'email') {
                const email = this.value.trim();
                const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
                const isValidEmail = email && emailRegex.test(email);
                if (verifyEmailBtn) {
                    verifyEmailBtn.disabled = !isValidEmail;

                }
            }
        });
    }
    
    // Function to reset verification status
    function resetVerificationStatus() {
        const mobileVerified = document.getElementById('mobile-verified');
        const verificationStatus = document.getElementById('verification-status');
        const editMobileBtn = document.getElementById('edit-mobile-btn');
        const cancelMobileBtn = document.getElementById('cancel-mobile-btn');
        
        if (mobileVerified) mobileVerified.value = '0';
        if (verificationStatus) {
            verificationStatus.textContent = '';
            verificationStatus.style.display = 'none';
        }
        if (editMobileBtn) editMobileBtn.classList.remove('show');
        if (cancelMobileBtn) cancelMobileBtn.classList.remove('show');
        if (otpInputLocation) {
            otpInputLocation.classList.remove('otp-input-visible');
            otpInputLocation.classList.add('otp-input-field');
            otpInputLocation.value = '';
        }
        if (verifyMobileBtn) {
            verifyMobileBtn.classList.remove('d-none');
            verifyMobileBtn.disabled = true;
        }
        if (verifyEmailBtn) {
            verifyEmailBtn.classList.remove('d-none');
            verifyEmailBtn.disabled = true;
        }
    }
    
    // Email verify button functionality
    if (verifyEmailBtn) {
        verifyEmailBtn.addEventListener('click', function() {

            if (currentVerificationMode === 'email') {
                // Email OTP logic
                sendEmailOTP();
            }
        });
    }
    
    // Function to send Email OTP
    function sendEmailOTP() {
        const email = emailInputInWrapper ? emailInputInWrapper.value.trim() : '';
        
        if (!email) {
            showToast('Please enter your email address first', 'error');
            return;
        }
        
        // Email validation
        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
        if (!emailRegex.test(email)) {
            showToast('Please enter a valid email address', 'error');
            return;
        }
        
        // Update UI for email OTP
        if (verifyEmailBtn) {
            verifyEmailBtn.textContent = 'Sending...';
            verifyEmailBtn.disabled = true;
        }
        
        // Make API call for email OTP (you'll need to implement this endpoint)
        fetch('https://sip-admin.designonline.in/api/send-otp', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                email: email,
                location_type: 1
                
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showToast('Email OTP sent successfully', 'success');
                
                // Reset email verify button
                if (verifyEmailBtn) {
                    verifyEmailBtn.textContent = 'Verify Email';
                    verifyEmailBtn.disabled = false;
                }
                
                // Show OTP input
                otpInput.classList.remove('otp-input-field');
                otpInput.classList.add('otp-input-visible');
                otpInput.style.display = 'block';
                otpInput.focus();
                
                // Show verify OTP button
                if (verifyOtpBtn) {
                   
                    verifyOtpBtn.style.display = 'inline-block';
                    verifyOtpBtn.disabled = false; // Enable by default
                }
                
                // Hide verify email button
                if (verifyEmailBtn) {
                    verifyEmailBtn.classList.add('d-none');
                }
                
                // Show action buttons
                if (editEmailBtn) {
                    editEmailBtn.classList.add('show');
                    editEmailBtn.style.display = 'inline-block';
                }
                if (cancelEmailBtn) {
                    cancelEmailBtn.classList.add('show');
                    cancelEmailBtn.style.display = 'inline-block';
                }
                
                // Show email action buttons container
                const emailActionButtons = document.querySelector('.email-action-buttons');
                if (emailActionButtons) {
                    emailActionButtons.style.display = 'flex';
                };

                // Start OTP timer (reuse existing timer logic)
                startEmailOtpTimer();
                
            } else {
                showToast(data.message || 'Failed to send email OTP', 'error');
                if (verifyEmailBtn) {
                    verifyEmailBtn.textContent = 'Verify Email';
                    verifyEmailBtn.disabled = false;
                }
            }
        })
        .catch(error => {
            showToast('Failed to send email OTP. Please try again.', 'error');
            if (verifyEmailBtn) {
                verifyEmailBtn.textContent = 'Verify Email';
                verifyEmailBtn.disabled = false;
            }
        });
    }
    
    // Field Validation - Year of Completion
    const completionYearInput = document.getElementById('completion_year');
    const completionYearError = document.getElementById('completion_year-error');
    
    if (completionYearInput) {
        let yearToastShown = false;
        let futureYearToastShown = false;
        const currentYear = new Date().getFullYear();
        
        function validateYear(value) {
            const year = parseInt(value);
            const isValidLength = value.length === 4;
            const isFutureYear = year > currentYear;
            const minYear = 1950;
            const isTooOld = year < minYear;
            
            return {
                isValidLength,
                isFutureYear,
                isTooOld,
                isValid: isValidLength && !isFutureYear && !isTooOld
            };
        }
        
        completionYearInput.addEventListener('input', function() {
            const value = this.value.trim();
            const validation = validateYear(value);
            
            if (value.length > 0 && value.length < 4) {
                // Show toast only once per session for length
                if (!yearToastShown) {
                    showToast('Year must be 4 digits', 'error');
                    yearToastShown = true;
                }
                futureYearToastShown = false; // Reset future year toast flag
            } else if (validation.isValidLength && validation.isFutureYear) {
                // Show toast for future year
                if (!futureYearToastShown) {
                    showToast(`Year cannot be greater than ${currentYear}`, 'error');
                    futureYearToastShown = true;
                }
                yearToastShown = false; // Reset length toast flag
            } else if (validation.isValidLength && validation.isTooOld) {
                // Show toast for too old year
                if (!futureYearToastShown) {
                    showToast('Year must be 1950 or later', 'error');
                    futureYearToastShown = true;
                }
                yearToastShown = false; // Reset length toast flag
            } else {
                // Reset toast flags when valid
                if (validation.isValid) {
                    yearToastShown = false;
                    futureYearToastShown = false;
                }
            }
        });
        
        completionYearInput.addEventListener('blur', function() {
            const value = this.value.trim();
            const validation = validateYear(value);
            
            if (value && value.length < 4) {
                showToast('Year must be 4 digits', 'error');
            } else if (validation.isValidLength && validation.isFutureYear) {
                showToast(`Year cannot be greater than ${currentYear}`, 'error');
            } else if (validation.isValidLength && validation.isTooOld) {
                showToast('Year must be 1950 or later', 'error');
            }
        });
    }
    
    // Name Validation
    const nameInput = document.querySelector('input[name="name"]');
    if (nameInput) {
        let nameToastShown = false;
        
        function validateName(name) {
            // Allow letters, spaces, apostrophes, hyphens, and dots (for names like O'Connor, Mary-Jane, Jr.)
            const nameRegex = /^[A-Za-z\s'.-]+$/;
            return nameRegex.test(name) && name.trim().length >= 2;
        }
        
        nameInput.addEventListener('blur', function() {
            const name = this.value.trim();
            if (name && !validateName(name)) {
                if (!nameToastShown) {
                    showToast('Please enter a valid name (letters and spaces only, minimum 2 characters)', 'error');
                    nameToastShown = true;
                }
            } else {
                nameToastShown = false;
            }
        });
        
        nameInput.addEventListener('input', function() {
            // Reset toast flag when user starts typing
            nameToastShown = false;
        });
    }
    
    // Email Validation - Handle both email inputs
    // Using existing regularEmailInput and emailInputInWrapper variables
    
    function validateEmail(email) {
        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
        return emailRegex.test(email);
    }
    
    // Validation for regular email input (India)
    if (regularEmailInput) {
        let emailToastShown = false;
        
        regularEmailInput.addEventListener('blur', function() {
            const email = this.value.trim();
            if (email && !validateEmail(email)) {
                if (!emailToastShown) {
                    showToast('Please enter a valid email address (e.g., user@example.com)', 'error');
                    emailToastShown = true;
                }
            } else {
                emailToastShown = false;
            }
        });
        
        regularEmailInput.addEventListener('input', function() {
            // Reset toast flag when user starts typing
            emailToastShown = false;
        });
    }
    
    // Validation for email input in wrapper (Outside India) - already handled in location switching logic
    
    // Mobile OTP Verification
    const mobileInput = document.getElementById('mobile-number');
    const verifyBtn = document.getElementById('verify-mobile-btn');
    const editMobileBtn = document.getElementById('edit-mobile-btn');
    const cancelMobileBtn = document.getElementById('cancel-mobile-btn');
    const otpInput = document.getElementById('otp-input');
    const verifyOtpBtn = document.getElementById('verify-otp-btn');
    const verificationStatus = document.getElementById('verification-status');
    const mobileVerified = document.getElementById('mobile-verified');
    const otpTimer = document.getElementById('otp-timer');
    
    // Email OTP Verification
    const editEmailBtn = document.getElementById('edit-email-btn');
    const cancelEmailBtn = document.getElementById('cancel-email-btn');
    const emailOtpTimer = document.getElementById('email-otp-timer');
    
    // Ensure OTP elements are hidden on page load
    function initializeOTPElements() {
        // Hide OTP input
        if (otpInput) {
            otpInput.classList.remove('otp-input-visible');
            otpInput.classList.add('otp-input-field');
            otpInput.value = '';
            otpInput.style.display = 'none';
        }
        
        // Hide verify OTP button
        if (verifyOtpBtn) {
            verifyOtpBtn.style.display = 'none';
        }
        
        // Hide edit/cancel buttons for mobile
        if (editMobileBtn) {
            editMobileBtn.classList.remove('show');
            editMobileBtn.style.display = 'none';
        }
        if (cancelMobileBtn) {
            cancelMobileBtn.classList.remove('show');
            cancelMobileBtn.style.display = 'none';
        }
        
        // Hide edit/cancel buttons for email
        if (editEmailBtn) {
            editEmailBtn.classList.remove('show');
            editEmailBtn.style.display = 'none';
        }
        if (cancelEmailBtn) {
            cancelEmailBtn.classList.remove('show');
            cancelEmailBtn.style.display = 'none';
        }
        
        // Hide timers
        if (otpTimer) {
            otpTimer.classList.remove('show');
            otpTimer.textContent = '';
            otpTimer.style.display = 'none';
        }
        if (emailOtpTimer) {
            emailOtpTimer.classList.remove('show');
            emailOtpTimer.textContent = '';
            emailOtpTimer.style.display = 'none';
        }
        
        // Hide verification status
        if (verificationStatus) {
            verificationStatus.style.display = 'none';
            verificationStatus.textContent = '';
        }
        
        const emailVerificationStatus = document.getElementById('email-verification-status');
        if (emailVerificationStatus) {
            emailVerificationStatus.style.display = 'none';
            emailVerificationStatus.textContent = '';
        }
        
        // Hide mobile action buttons container
        const mobileActionButtons = document.querySelector('.mobile-action-buttons');
        if (mobileActionButtons) {
            mobileActionButtons.style.display = 'none';
        }
        
        // Hide email action buttons container
        const emailActionButtons = document.querySelector('.email-action-buttons');
        if (emailActionButtons) {
            emailActionButtons.style.display = 'none';
        }
    }
    
    // Initialize on page load
    initializeOTPElements();
    
    // Debug: Check if verifyOtpBtn element is found
    
    
   
    if (verifyOtpBtn) {
    
        setTimeout(() => {


            verifyOtpBtn.disabled = false;



            const computedStyle = window.getComputedStyle(verifyOtpBtn);






            
            // Try to force click the button

            try {

                verifyOtpBtn.click();

            } catch (error) {

            }
            
            // Also try dispatching a click event manually

            try {
                const clickEvent = new MouseEvent('click', {
                    bubbles: true,
                    cancelable: true,
                    view: window
                });
                verifyOtpBtn.dispatchEvent(clickEvent);

            } catch (error) {

            }
            
            // Check if button has any overlapping elements
            const rect = verifyOtpBtn.getBoundingClientRect();
            const elementAtPoint = document.elementFromPoint(rect.left + rect.width/2, rect.top + rect.height/2);


            
        }, 3000);
    }
    
    let currentMobile = '';
    let verifiedMobile = ''; // Store the verified mobile number
    let timerInterval = null;
    
    // Timer functions
    function startOtpTimer() {
        let timeLeft = 30;
        otpTimer.classList.add('show');
        otpTimer.textContent = `Resend OTP in ${timeLeft}s`;
        
        if (timerInterval) clearInterval(timerInterval);
        
        timerInterval = setInterval(() => {
            timeLeft--;
            if (timeLeft > 0) {
                otpTimer.textContent = `Resend OTP in ${timeLeft}s`;
            } else {
                clearInterval(timerInterval);
                otpTimer.innerHTML = '<span class="resend-link" id="resend-otp-link">Resend OTP</span>';
                
                // Add click handler for resend
                document.getElementById('resend-otp-link').addEventListener('click', function() {
                    // Extract country code and mobile number from currentMobile using proper country code lookup
                    function extractCountryCodeAndMobile(fullNumber) {
                        // Common country codes (sorted by length, longest first)
                        const countryCodes = [
                            '+1242', '+1246', '+1264', '+1268', '+1284', '+1340', '+1345', '+1441', '+1473', '+1649', '+1664', '+1670', '+1671', '+1684', '+1721', '+1758', '+1767', '+1784', '+1787', '+1809', '+1829', '+1849', '+1868', '+1869', '+1876', '+1939',
                            '+358', '+370', '+371', '+372', '+373', '+374', '+375', '+376', '+377', '+378', '+380', '+381', '+382', '+383', '+385', '+386', '+387', '+389', '+420', '+421', '+423', '+590', '+591', '+592', '+593', '+594', '+595', '+596', '+597', '+598', '+599', '+670', '+672', '+673', '+674', '+675', '+676', '+677', '+678', '+679', '+680', '+681', '+682', '+683', '+684', '+685', '+686', '+687', '+688', '+689', '+690', '+691', '+692', '+850', '+852', '+853', '+855', '+856', '+880', '+886', '+960', '+961', '+962', '+963', '+964', '+965', '+966', '+967', '+968', '+970', '+971', '+972', '+973', '+974', '+975', '+976', '+977', '+992', '+993', '+994', '+995', '+996', '+998',
                            '+93', '+94', '+95', '+98', '+20', '+27', '+30', '+31', '+32', '+33', '+34', '+36', '+39', '+40', '+41', '+43', '+44', '+45', '+46', '+47', '+48', '+49', '+51', '+52', '+53', '+54', '+55', '+56', '+57', '+58', '+60', '+61', '+62', '+63', '+64', '+65', '+66', '+81', '+82', '+84', '+86', '+90', '+91', '+92',
                            '+1', '+7'
                        ];
                        
                        for (const code of countryCodes) {
                            if (fullNumber.startsWith(code)) {
                                return {
                                    countryCode: code,
                                    mobileNumber: fullNumber.substring(code.length)
                                };
                            }
                        }
                        
                        return {
                            countryCode: '+91',
                            mobileNumber: fullNumber.replace(/^\+91/, '')
                        };
                    }
                    
                    const extracted = extractCountryCodeAndMobile(currentMobile);
                    sendOtp(extracted.mobileNumber, extracted.countryCode);
                });
            }
        }, 1000);
    }
    
    // Email OTP Timer function
    function startEmailOtpTimer() {
        let timeLeft = 30;
        emailOtpTimer.classList.add('show');
        emailOtpTimer.textContent = `Resend OTP in ${timeLeft}s`;
        
        if (timerInterval) clearInterval(timerInterval);
        
        timerInterval = setInterval(() => {
            timeLeft--;
            if (timeLeft > 0) {
                emailOtpTimer.textContent = `Resend OTP in ${timeLeft}s`;
            } else {
                clearInterval(timerInterval);
                emailOtpTimer.innerHTML = '<span class="resend-link" id="resend-email-otp-link">Resend OTP</span>';
                
                // Add click handler for resend
                document.getElementById('resend-email-otp-link').addEventListener('click', function() {
                    sendEmailOTP();
                });
            }
        }, 1000);
    }
    
    function sendOtp(mobileNumber, countryCode) {
        // Disable resend link if exists
        const resendLink = document.getElementById('resend-otp-link');
        if (resendLink) {
            resendLink.style.pointerEvents = 'none';
            resendLink.style.opacity = '0.5';
        }
        
        fetch('https://sip-admin.designonline.in/api/send-otp', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                mobile_number: mobileNumber, // Send mobile number without country code
                country_code: countryCode, // Send country code separately
                location_type: 0
            })
        })
        .then(response => response.json())
        .then(data => {
       
            if (data.status || data.success) {
                // let alertMessage = 'OTP sent to ' + mobile;
                let alertMessage = 'OTP has been sent to your registered mobile number';
                // if (data.otp) {
                //     alertMessage += '\n\nYour OTP is: ' + data.otp;
                // } else if (data.data && data.data.otp) {
                //     alertMessage += '\n\nYour OTP is: ' + data.data.otp;
                // }
                showToast(alertMessage, 'success');
                
                verifyBtn.classList.add('d-none');
                editMobileBtn.classList.add('show');
                editMobileBtn.style.display = 'inline-block';
                otpInput.classList.remove('otp-input-field');
                otpInput.classList.add('otp-input-visible');
                otpInput.style.display = 'block';
                otpInput.focus();
                
                // Show verify OTP button
                if (verifyOtpBtn) {
                    
                    verifyOtpBtn.style.display = 'inline-block';
                    verifyOtpBtn.disabled = false; // Enable by default
                }
                
                // Show mobile action buttons container
                const mobileActionButtons = document.querySelector('.mobile-action-buttons');
                if (mobileActionButtons) {
                    mobileActionButtons.style.display = 'flex';
                }
                
                // Start timer
                startOtpTimer();
            } else {
                showToast( (data.message || 'Please try again'), 'error');
                verifyBtn.textContent = 'Verify';
                verifyBtn.disabled = false;
                
                // Re-enable mobile input so user can edit
                mobileInput.readOnly = false;
                
                // Show edit button if there was a previously verified number
                if (verifiedMobile !== '') {
                    editMobileBtn.classList.add('show');
                }
            }
        })
        .catch(error => {
            showToast('Failed to send OTP. Please try again.', 'error');
            verifyBtn.textContent = 'Verify';
            verifyBtn.disabled = false;
            
            // Re-enable mobile input so user can edit
            mobileInput.readOnly = false;
            
            // Show edit button if there was a previously verified number
            if (verifiedMobile !== '') {
                editMobileBtn.classList.add('show');
            }
        });
    }
    
    if (mobileInput && verifyBtn) {
        // Enable verify button based on location selection and field validation
        function updateVerifyButtonState() {
            const isIndiaSelected = locationIndiaRadio && locationIndiaRadio.checked;
            const isOutsideIndiaSelected = locationOutsideIndiaRadio && locationOutsideIndiaRadio.checked;
            
            if (isIndiaSelected) {
                // India: Validate mobile number with country code awareness
                const countryCodeSelect = document.getElementById('country-code-select');
                const selectedCountryCode = countryCodeSelect ? countryCodeSelect.value : '+91';
                const mobileNumber = mobileInput.value.trim();
                
                let isValidMobileLength = false;
                if (selectedCountryCode === '+91') {
                    isValidMobileLength = mobileNumber.length === 10;
                } else {
                    isValidMobileLength = mobileNumber.length >= 7 && mobileNumber.length <= 15;
                }
                
                const isActuallyVerified = mobileVerified.value === '1';
                const hasVerifiedNumber = isActuallyVerified && verifiedMobile !== '';
                const isInEditMode = !mobileInput.readOnly;
                const fullMobileNumber = getFullMobileNumber();
                const isNumberChanged = hasVerifiedNumber && fullMobileNumber !== verifiedMobile;
                
                if (mobileInput.readOnly) {
                    if (verifyMobileBtn) verifyMobileBtn.disabled = true;
                } else if (!isValidMobileLength) {
                    if (verifyMobileBtn) verifyMobileBtn.disabled = true;
                } else if (hasVerifiedNumber && !isNumberChanged) {
                    if (verifyMobileBtn) verifyMobileBtn.disabled = true;
                } else {
                    if (verifyMobileBtn) verifyMobileBtn.disabled = false;
                }
            } else if (isOutsideIndiaSelected) {
                // Outside India: Validate email
                const email = emailInputInWrapper ? emailInputInWrapper.value.trim() : '';
                const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
                const isValidEmail = email && emailRegex.test(email);
                const isActuallyVerified = mobileVerified.value === '1'; // Reusing same verification flag
                
                if (isValidEmail && !isActuallyVerified) {
                    if (verifyEmailBtn) verifyEmailBtn.disabled = false;
                } else {
                    if (verifyEmailBtn) verifyEmailBtn.disabled = true;
                }
            }
        }
        
        // Mobile input validation
        mobileInput.addEventListener('input', function() {
            updateVerifyButtonState();
            
            const isActuallyVerified = mobileVerified.value === '1';
            const hasVerifiedNumber = isActuallyVerified && verifiedMobile !== '';
            const isInEditMode = !mobileInput.readOnly;
            
            // Show cancel button if we have a verified number and we're in edit mode
            if (verifiedMobile !== '' && isInEditMode) {
                cancelMobileBtn.classList.add('show');
            } else {
                cancelMobileBtn.classList.remove('show');
            }
        });
        
        // Email input validation for Outside India users
        if (emailInputInWrapper) {
            emailInputInWrapper.addEventListener('input', function() {
                updateVerifyButtonState();
            });
        }
        
        // Location radio button change handlers
        if (locationIndiaRadio) {
            locationIndiaRadio.addEventListener('change', function() {
                updateVerifyButtonState();
            });
        }
        
        if (locationOutsideIndiaRadio) {
            locationOutsideIndiaRadio.addEventListener('change', function() {
                updateVerifyButtonState();
            });
        }
        
        // Initial state update
        updateVerifyButtonState();
        
        // Send OTP (Updated to handle both mobile and email with country code support)
        verifyBtn.addEventListener('click', function() {
            // Prevent multiple rapid clicks
            if (verifyBtn.disabled) {
                return;
            }
            
            const selectedLocationElement = document.querySelector('input[name="location_type"]:checked');
            if (!selectedLocationElement) return;
            
            const selectedLocation = selectedLocationElement.value;
            const countryCodeSelect = document.getElementById('country-code-select');
            const mobile = mobileInput.value.trim();
            const countryCode = countryCodeSelect ? countryCodeSelect.value : '+91';
            const fullMobileNumber = countryCode + mobile;
            
            // Validate mobile number based on location
            let isValidMobile = false;
            if (selectedLocation === '0' && countryCode === '+91') { // India
                isValidMobile = mobile.length === 10;
                if (!isValidMobile) {
                    showToast('Please enter a valid 10-digit mobile number', 'error');
                    return;
                }
            } else {
                isValidMobile = mobile.length >= 7 && mobile.length <= 15;
                if (!isValidMobile) {
                    showToast('Please enter a valid mobile number (7-15 digits)', 'error');
                    return;
                }
            }
            
            currentMobile = fullMobileNumber;
            verifyBtn.textContent = 'Sending...';
            verifyBtn.disabled = true;
            
            // Don't make input readonly here - wait for successful API response
            
            // Hide cancel button while sending OTP
            cancelMobileBtn.classList.remove('show');
            
            sendOtp(mobile, countryCode);
        });
    }
    
    // Edit Mobile Button
    if (editMobileBtn) {
        editMobileBtn.addEventListener('click', function() {
            // Reset mobile verification state but keep verifiedMobile for cancel functionality
            mobileVerified.value = '0';
            mobileInput.readOnly = false;
            mobileInput.focus();
            
            // Hide edit button
            editMobileBtn.classList.remove('show');
            editMobileBtn.style.display = 'none';
            
            // Show verify button
            verifyBtn.classList.remove('d-none');
            verifyBtn.textContent = 'Verify';
            
            // Set verify button state based on current conditions
            const isValidLength = mobileInput.value.length === 10;
            const isActuallyVerified = verifiedMobile !== '' && mobileInput.value === verifiedMobile;
            
            // Enable verify button if valid length and either no verified number or number is different
            verifyBtn.disabled = !isValidLength || isActuallyVerified;
            
            // Hide verification status
            verificationStatus.style.display = 'none';
            verificationStatus.textContent = '';
            
            // Hide OTP input
            otpInput.classList.remove('otp-input-visible');
            otpInput.classList.add('otp-input-field');
            otpInput.style.display = 'none';
            otpInput.value = '';
            
            // Clear and hide timer
            if (timerInterval) clearInterval(timerInterval);
            otpTimer.classList.remove('show');
            otpTimer.style.display = 'none';
            otpTimer.textContent = '';
            
            // Re-enable location selection when editing
            enableLocationSelection();
            
            // Show cancel button if we have a verified number (entering edit mode)
            if (verifiedMobile !== '') {
                cancelMobileBtn.classList.add('show');
                cancelMobileBtn.style.display = 'inline-block';
                
                // Show mobile action buttons container
                const mobileActionButtons = document.querySelector('.mobile-action-buttons');
                if (mobileActionButtons) {
                    mobileActionButtons.style.display = 'flex';
                }
            }
        });
    }
    
    // Cancel Mobile Button - Restore verified number
    if (cancelMobileBtn) {
        cancelMobileBtn.addEventListener('click', function() {
            // Restore the verified mobile number
            mobileInput.value = verifiedMobile;
            mobileInput.readOnly = true;
            
            // Restore verification state
            mobileVerified.value = '1';
            
            // Hide cancel and verify buttons
            cancelMobileBtn.classList.remove('show');
            cancelMobileBtn.style.display = 'none';
            verifyBtn.classList.add('d-none');
            
            // Show edit button
            editMobileBtn.classList.add('show');
            editMobileBtn.style.display = 'inline-block';
            
            // Show verification status
            verificationStatus.textContent = 'âœ“ Verified';
            verificationStatus.style.color = '#249829';
            verificationStatus.style.display = 'block';
            
            // Hide OTP input
            otpInput.classList.remove('otp-input-visible');
            otpInput.classList.add('otp-input-field');
            otpInput.style.display = 'none';
            otpInput.value = '';
            
            // Clear and hide timer
            if (timerInterval) clearInterval(timerInterval);
            otpTimer.classList.remove('show');
            otpTimer.style.display = 'none';
            otpTimer.textContent = '';
            
            // Show mobile action buttons container
            const mobileActionButtons = document.querySelector('.mobile-action-buttons');
            if (mobileActionButtons) {
                mobileActionButtons.style.display = 'flex';
            }
            
            // Disable location selection again when returning to verified state
            disableLocationSelection();
        });
    }
    
    // Email Edit Button
    if (editEmailBtn) {
        editEmailBtn.addEventListener('click', function() {
            // Enable email editing
            if (emailInputInWrapper) {
                emailInputInWrapper.readOnly = false;
                emailInputInWrapper.focus();
            }
            
            // Hide edit button
            editEmailBtn.classList.remove('show');
            editEmailBtn.style.display = 'none';
            
            // Show verify email button
            if (verifyEmailBtn) {
                verifyEmailBtn.style.display = 'inline-block';
                verifyEmailBtn.disabled = false;
            }
            
            // Hide email verification status
            const emailVerificationStatus = document.getElementById('email-verification-status');
            if (emailVerificationStatus) {
                emailVerificationStatus.style.display = 'none';
            }
            
            // Hide OTP input
            otpInput.classList.remove('otp-input-visible');
            otpInput.classList.add('otp-input-field');
            otpInput.style.display = 'none';
            otpInput.value = '';
            
            // Clear and hide email timer
            if (timerInterval) clearInterval(timerInterval);
            emailOtpTimer.classList.remove('show');
            emailOtpTimer.style.display = 'none';
            emailOtpTimer.textContent = '';
            
            // Re-enable location selection when editing
            enableLocationSelection();
            
            // Show cancel button
            cancelEmailBtn.classList.add('show');
            cancelEmailBtn.style.display = 'inline-block';
            
            // Show email action buttons container
            const emailActionButtons = document.querySelector('.email-action-buttons');
            if (emailActionButtons) {
                emailActionButtons.style.display = 'flex';
            }
        });
    }
    
    // Email Cancel Button
    if (cancelEmailBtn) {
        cancelEmailBtn.addEventListener('click', function() {
            // Reset to verified state
            if (emailInputInWrapper) {
                emailInputInWrapper.readOnly = true;
            }
            
            // Hide cancel and verify buttons
            cancelEmailBtn.classList.remove('show');
            cancelEmailBtn.style.display = 'none';
            if (verifyEmailBtn) {
                verifyEmailBtn.style.display = 'none';
            }
            
            // Show edit button
            editEmailBtn.classList.add('show');
            editEmailBtn.style.display = 'inline-block';
            
            // Show email verification status
            const emailVerificationStatus = document.getElementById('email-verification-status');
            if (emailVerificationStatus) {
                emailVerificationStatus.textContent = 'âœ“ Verified';
                emailVerificationStatus.style.color = '#249829';
                emailVerificationStatus.style.display = 'block';
            }
            
            // Hide OTP input
            otpInput.classList.remove('otp-input-visible');
            otpInput.classList.add('otp-input-field');
            otpInput.style.display = 'none';
            otpInput.value = '';
            
            // Clear and hide email timer
            if (timerInterval) clearInterval(timerInterval);
            emailOtpTimer.classList.remove('show');
            emailOtpTimer.style.display = 'none';
            emailOtpTimer.textContent = '';
            
            // Show email action buttons container
            const emailActionButtons = document.querySelector('.email-action-buttons');
            if (emailActionButtons) {
                emailActionButtons.style.display = 'flex';
            }
            
            // Disable location selection again when returning to verified state
            disableLocationSelection();
        });
    }
    
    // Verify OTP
    if (otpInput) {
        
        otpInput.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    }
    
    // Verify OTP button click handler
    
    if (verifyOtpBtn) {
        
        verifyOtpBtn.addEventListener('click', function(e) {
            e.preventDefault(); // Prevent any form submission
            e.stopPropagation(); // Stop event bubbling
            
            const otp = otpInput.value;
            
            if (otp.length !== 6) {
                // showToast('Please enter a valid 6-digit OTP', 'error');
                return;
            }
            
            // Disable button during verification
            verifyOtpBtn.disabled = true;
            verifyOtpBtn.textContent = 'Verifying...';
            
            const formData = new FormData();
            
            // Send different data based on verification mode
            if (currentVerificationMode === 'mobile') {
                // India: Send mobile number and country code separately
                // Use proper country code extraction instead of regex
                function extractCountryCodeAndMobile(fullNumber) {
                    // Common country codes (sorted by length, longest first to avoid partial matches)
                    const countryCodes = [
                        '+1242', '+1246', '+1264', '+1268', '+1284', '+1340', '+1345', '+1441', '+1473', '+1649', '+1664', '+1670', '+1671', '+1684', '+1721', '+1758', '+1767', '+1784', '+1787', '+1809', '+1829', '+1849', '+1868', '+1869', '+1876', '+1939',
                        '+358', '+370', '+371', '+372', '+373', '+374', '+375', '+376', '+377', '+378', '+380', '+381', '+382', '+383', '+385', '+386', '+387', '+389', '+420', '+421', '+423', '+590', '+591', '+592', '+593', '+594', '+595', '+596', '+597', '+598', '+599', '+670', '+672', '+673', '+674', '+675', '+676', '+677', '+678', '+679', '+680', '+681', '+682', '+683', '+684', '+685', '+686', '+687', '+688', '+689', '+690', '+691', '+692', '+850', '+852', '+853', '+855', '+856', '+880', '+886', '+960', '+961', '+962', '+963', '+964', '+965', '+966', '+967', '+968', '+970', '+971', '+972', '+973', '+974', '+975', '+976', '+977', '+992', '+993', '+994', '+995', '+996', '+998',
                        '+93', '+94', '+95', '+98', '+20', '+27', '+30', '+31', '+32', '+33', '+34', '+36', '+39', '+40', '+41', '+43', '+44', '+45', '+46', '+47', '+48', '+49', '+51', '+52', '+53', '+54', '+55', '+56', '+57', '+58', '+60', '+61', '+62', '+63', '+64', '+65', '+66', '+81', '+82', '+84', '+86', '+90', '+91', '+92',
                        '+1', '+7'
                    ];
                    
                    // Find the matching country code
                    for (const code of countryCodes) {
                        if (fullNumber.startsWith(code)) {
                            return {
                                countryCode: code,
                                mobileNumber: fullNumber.substring(code.length)
                            };
                        }
                    }
                    
                    // Fallback: assume +91 if no match found
                    return {
                        countryCode: '+91',
                        mobileNumber: fullNumber.replace(/^\+91/, '')
                    };
                }
                
                const extracted = extractCountryCodeAndMobile(currentMobile);
                const countryCode = extracted.countryCode;
                const mobileNumber = extracted.mobileNumber;
                
                formData.append('mobile_number', mobileNumber); // Send mobile number without country code
                formData.append('country_code', countryCode); // Send country code separately
                formData.append('location_type', '0');
            } else if (currentVerificationMode === 'email') {
                // Outside India: Send email
                const email = emailInputInWrapper ? emailInputInWrapper.value.trim() : '';
                formData.append('email', email);
                formData.append('location_type', '1');
            }
            
            formData.append('otp', otp);
            
            fetch('https://sip-admin.designonline.in/api/verify-otp', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                return response.json();
            })
            .then(data => {
                if (data.status || data.success) {
                    // Handle success for both mobile and email verification
                    if (currentVerificationMode === 'mobile') {
                        mobileVerified.value = '1';
                        mobileInput.readOnly = true;
                        verifiedMobile = currentMobile;
                        
                        // Update mobile verification status
                        const mobileVerificationStatus = document.getElementById('verification-status');
                        if (mobileVerificationStatus) {
                            mobileVerificationStatus.textContent = 'âœ“ Verified';
                            mobileVerificationStatus.style.color = '#249829';
                            mobileVerificationStatus.style.display = 'block';
                        }
                    } else if (currentVerificationMode === 'email') {
                        // For email verification
                        const emailInput = emailInputInWrapper;
                        if (emailInput) {
                            emailInput.readOnly = true;
                        }
                        
                        // Update email verification status
                        const emailVerificationStatus = document.getElementById('email-verification-status');
                        if (emailVerificationStatus) {
                            emailVerificationStatus.textContent = 'âœ“ Verified';
                            emailVerificationStatus.style.color = '#249829';
                            emailVerificationStatus.style.display = 'block';
                        }
                    }
                    
                    // Disable location selection after verification
                    disableLocationSelection();
                    
                    otpInput.classList.remove('otp-input-visible');
                    otpInput.classList.add('otp-input-field');
                    otpInput.style.display = 'none';
                    
                    // Hide verify OTP button
                    verifyOtpBtn.style.display = 'none';
                    
                    // Show appropriate edit button based on verification mode
                    if (currentVerificationMode === 'mobile') {
                        editMobileBtn.classList.add('show');
                        editMobileBtn.style.display = 'inline-block';
                        cancelMobileBtn.classList.remove('show');
                        cancelMobileBtn.style.display = 'none';
                        
                        // Show mobile action buttons container
                        const mobileActionButtons = document.querySelector('.mobile-action-buttons');
                        if (mobileActionButtons) {
                            mobileActionButtons.style.display = 'flex';
                        }
                    } else if (currentVerificationMode === 'email') {
                        editEmailBtn.classList.add('show');
                        editEmailBtn.style.display = 'inline-block';
                        cancelEmailBtn.classList.remove('show');
                        cancelEmailBtn.style.display = 'none';
                        
                        // Show email action buttons container
                        const emailActionButtons = document.querySelector('.email-action-buttons');
                        if (emailActionButtons) {
                            emailActionButtons.style.display = 'flex';
                        }
                    }
                    
                    // Clear appropriate timer based on verification mode
                    if (timerInterval) clearInterval(timerInterval);
                    if (currentVerificationMode === 'mobile') {
                        otpTimer.classList.remove('show');
                        otpTimer.style.display = 'none';
                    } else if (currentVerificationMode === 'email') {
                        emailOtpTimer.classList.remove('show');
                        emailOtpTimer.style.display = 'none';
                    }
                    
                    showToast('OTP verified successfully!', 'success');
                } else {
                    showToast((data.message || 'Please try again'), 'error');
                    otpInput.value = '';
                    
                    // Re-enable button on error
                    verifyOtpBtn.disabled = false;
                    verifyOtpBtn.textContent = 'Verify OTP';
                }
            })
            .catch(error => {
                showToast('Failed to verify OTP. Please try again.', 'error');
                otpInput.value = '';
                
                // Re-enable button on error
                verifyOtpBtn.disabled = false;
                verifyOtpBtn.textContent = 'Verify OTP';
            });
        });
    } else {
        
    }
    
    // Simple multi-step form functionality
    const step1Fields = document.getElementById('step-1-fields');
    const step2Fields = document.getElementById('step-2-fields');
    const nextStepBtn = document.getElementById('next-step-btn');
    const prevStepBtn = document.getElementById('prev-step-btn');
    
    if (nextStepBtn && prevStepBtn) {
        nextStepBtn.addEventListener('click', function() {
            // Get location type first
            const locationType = document.querySelector('[name="location_type"]:checked')?.value;
            if (!locationType) {
                showToast('Please select your location (India or Outside India)', 'error');
                return;
            }
            
            // Validate step 1 fields before proceeding
            const fullName = document.querySelector('[name="name"]').value.trim();
            const yearOfCompletion = document.querySelector('[name="completion_year"]').value.trim();
            const stateId = document.querySelector('#state').value;
            const cityValue = document.querySelector('[name="city"]').value;
            const cityOther = document.querySelector('[name="city_other"]').value.trim();
            const pincodeId = document.querySelector('#pincode').value;
            const centerLocationId = document.querySelector('#center_location').value;
            const centerLocationOther = document.querySelector('#center_location_other').value.trim();
            const mobileNumber = document.querySelector('[name="contact"]').value.trim();
            const mobileVerified = document.querySelector('#mobile-verified');
            
            // Get email based on location type
            let email = '';
            let emailVerified = false;
            if (locationType === '0') {
                // India: Get email from regular email input
                const regularEmailInput = document.querySelector('.regular-email-input');
                email = regularEmailInput ? regularEmailInput.value.trim() : '';
            } else if (locationType === '1') {
                // Outside India: Get email from email verification wrapper
                const emailInputInWrapper = document.querySelector('.email-input');
                email = emailInputInWrapper ? emailInputInWrapper.value.trim() : '';
                const emailStatus = document.querySelector('#email-verification-status');
                emailVerified = emailStatus && emailStatus.textContent.includes('Verified');
            }
            
            // Validate step 1 fields
            if (!fullName) {
                showToast('Please enter your full name', 'error');
                return;
            }
            
            const nameRegex = /^[A-Za-z\s'.-]+$/;
            if (!nameRegex.test(fullName) || fullName.length < 2) {
                showToast('Please enter a valid name (letters and spaces only, minimum 2 characters)', 'error');
                return;
            }
            
            if (!yearOfCompletion || yearOfCompletion.length !== 4) {
                showToast('Please enter a valid 4-digit year of completion', 'error');
                return;
            }
            
            const currentYear = new Date().getFullYear();
            const yearValue = parseInt(yearOfCompletion);
            if (yearValue > currentYear) {
                showToast(`Year of completion cannot be greater than ${currentYear}`, 'error');
                return;
            }
            
            if (yearValue < 1950) {
                showToast('Year of completion must be 1950 or later', 'error');
                return;
            }
            
            if (!stateId) {
                showToast('Please select a state', 'error');
                return;
            }
            
            if (!cityValue) {
                showToast('Please select a city', 'error');
                return;
            }
            
            // If city is "others", validate city_other
            if (cityValue === 'others') {
                if (!cityOther) {
                    showToast('Please enter your city name', 'error');
                    return;
                }
                const cityRegex = /^[A-Za-z\s'.-]+$/;
                if (!cityRegex.test(cityOther) || cityOther.length < 2) {
                    showToast('Please enter a valid city name (letters and spaces only)', 'error');
                    return;
                }
            }
            
            if (!pincodeId) {
                showToast('Please select a pincode', 'error');
                return;
            }
            
            if (!centerLocationId) {
                showToast('Please select a center location', 'error');
                return;
            }
            
            // If center location is "others", validate center_location_other
            if (centerLocationId === 'others') {
                if (!centerLocationOther) {
                    showToast('Please enter your center location', 'error');
                    return;
                }
                const centerRegex = /^[A-Za-z\s'.-]+$/;
                if (!centerRegex.test(centerLocationOther) || centerLocationOther.length < 2) {
                    showToast('Please enter a valid center location (letters and spaces only)', 'error');
                    return;
                }
            }
            
            if (!email) {
                showToast('Please enter your email address', 'error');
                return;
            }
            
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(email)) {
                showToast('Please enter a valid email address (e.g., user@example.com)', 'error');
                return;
            }
            
            // For Outside India, check email verification
            if (locationType === '1' && !emailVerified) {
                showToast('Please verify your email address before proceeding', 'error');
                return;
            }
            
            if (!mobileNumber) {
                showToast('Please enter your mobile number', 'error');
                return;
            }
            
            // Validate mobile number length based on location type
            if (locationType === '0') {
                // India: 10 digits
                if (mobileNumber.length !== 10) {
                    showToast('Please enter a valid 10-digit mobile number', 'error');
                    return;
                }
            } else {
                // Outside India: 7-15 digits
                if (mobileNumber.length < 7 || mobileNumber.length > 15) {
                    showToast('Please enter a valid mobile number (7-15 digits)', 'error');
                    return;
                }
            }
            
            // For India, check mobile verification
            if (locationType === '0' && mobileVerified && mobileVerified.value !== '1') {
                showToast('Please verify your mobile number before proceeding', 'error');
                return;
            }
            
            // All validations passed, move to step 2
            step1Fields.style.display = 'none';
            step2Fields.style.display = 'block';
        });
        
        prevStepBtn.addEventListener('click', function() {
            step2Fields.style.display = 'none';
            step1Fields.style.display = 'block';
        });
    }
    
    // Age Confirmation Functions
    function showAgeConfirmation() {
        const popup = document.getElementById('age-confirmation-popup');
        if (popup) {
            popup.classList.add('active');
        }
    }
    
    function hideAgeConfirmation() {
        const popup = document.getElementById('age-confirmation-popup');
        if (popup) {
            popup.classList.remove('active');
        }
    }
    
    function submitRegistrationForm() {
        const registrationForm = document.getElementById('alumni-registration-form');
        if (!registrationForm) return;
        
        // Get all form values
        const locationType = registrationForm.querySelector('[name="location_type"]:checked').value;
        const fullName = registrationForm.querySelector('[name="name"]').value.trim();
        const yearOfCompletion = registrationForm.querySelector('[name="completion_year"]').value.trim();
        const stateId = registrationForm.querySelector('#state').value;
        const cityValue = registrationForm.querySelector('[name="city"]').value;
        const cityOther = registrationForm.querySelector('[name="city_other"]').value.trim();
        
        // Get email based on location type
        let email = '';
        if (locationType === '0') {
            // India: Get email from regular email input
            const regularEmailInput = registrationForm.querySelector('.regular-email-input');
            email = regularEmailInput ? regularEmailInput.value.trim() : '';
        } else if (locationType === '1') {
            // Outside India: Get email from email verification wrapper
            const emailInputInWrapper = registrationForm.querySelector('.email-input');
            email = emailInputInWrapper ? emailInputInWrapper.value.trim() : '';
        }
        
        const mobileNumber = registrationForm.querySelector('[name="contact"]').value.trim();
        const occupation = registrationForm.querySelector('[name="occupation"]').value.trim();
        const pincodeId = registrationForm.querySelector('#pincode').value.trim();
        const currentLocation = registrationForm.querySelector('[name="current_location"]').value.trim();
        const centerLocationId = registrationForm.querySelector('#center_location').value.trim();
        const centerLocationOther = registrationForm.querySelector('#center_location_other').value.trim();
        const levelCompleted = registrationForm.querySelector('#level_completed').value.trim();
       
        // // Validate fields in form order
        // // 1. Full Name
        // if (!fullName) {
        //     showToast('Please enter your full name', 'error');
        //     return;
        // }
        
        // // Enhanced name validation
        // const nameRegex = /^[A-Za-z\s'.-]+$/;
        // if (!nameRegex.test(fullName) || fullName.length < 2) {
        //     showToast('Please enter a valid name (letters and spaces only, minimum 2 characters)', 'error');
        //     return;
        // }
        
        // // 2. Year of Completion
        // if (!yearOfCompletion || yearOfCompletion.length !== 4) {
        //     showToast('Please enter a valid 4-digit year of completion', 'error');
        //     return;
        // }
        
        // const currentYear = new Date().getFullYear();
        // const yearValue = parseInt(yearOfCompletion);
        // if (yearValue > currentYear) {
        //     showToast(`Year of completion cannot be greater than ${currentYear}`, 'error');
        //     return;
        // }
        
        // if (yearValue < 1950) {
        //     showToast('Year of completion must be 1950 or later', 'error');
        //     return;
        // }
        
        // // 3. State
        // if (!stateId) {
        //     showToast('Please select a state', 'error');
        //     return;
        // }
        
        // // 4. City
        // if (!cityValue) {
        //     showToast('Please select a city', 'error');
        //     return;
        // }
        
        // // 5. Email
        // if (!email) {
        //     showToast('Please enter your email address', 'error');
        //     return;
        // }
        
        // // Enhanced email validation
        // const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
        // if (!emailRegex.test(email)) {
        //     showToast('Please enter a valid email address (e.g., user@example.com)', 'error');
        //     return;
        // }
        
        // 6. Mobile Number
        // if (!mobileNumber || mobileNumber.length !== 10) {
        //     showToast('Please enter a valid 10-digit mobile number', 'error');
        //     return;
        // }
        
        // Mobile verification check
        // if (mobileVerified.value !== '1') {
        //     showToast('Please verify your mobile number before submitting', 'error');
        //     return;
        // }
        
        // 7. Occupation
        if (!occupation) {
            showToast('Please select or enter your occupation', 'error');
            return;
        }
        
        const payload = {
            full_name: fullName,
            year_of_completion: parseInt(yearOfCompletion),
            state_id: parseInt(stateId),
            email: email || "vijin1697@gmail.com",
            mobile_number: mobileNumber, // This now contains only the mobile number without country code
            country_code: document.getElementById('country-code-select') ? document.getElementById('country-code-select').value : (locationType === 0 ? "+91" : "+1"), // Get actual selected country code
            occupation: occupation,
            current_location: currentLocation,
            level_completed: levelCompleted,
            pincode_id: parseInt(pincodeId),
            location_type: locationType
        };

        // Handle city or other_city
        if (cityValue === 'others' || cityOther) {
            if (!cityOther) {
                showToast('Please enter your city name', 'error');
                return;
            }
            
            // Validate city name format
            const cityRegex = /^[A-Za-z\s'.-]+$/;
            if (!cityRegex.test(cityOther) || cityOther.length < 2) {
                showToast('Please enter a valid city name (letters and spaces only)', 'error');
                return;
            }
            
            payload.city_id = 'others';
            payload.other_city = cityOther;
        } else {
            if (!cityValue) {
                showToast('Please select a city', 'error');
                return;
            }
            payload.city_id = parseInt(cityValue);
        }

        // Handle center location or other_location
        if (centerLocationId === 'others' || centerLocationOther) {
            if (!centerLocationOther) {
                showToast('Please enter your center location', 'error');
                return;
            }
            
            // Validate center location name format
            const centerRegex = /^[A-Za-z\s'.-]+$/;
            if (!centerRegex.test(centerLocationOther) || centerLocationOther.length < 2) {
                showToast('Please enter a valid center location (letters and spaces only)', 'error');
                return;
            }
            
            payload.center_id = 'others';
            payload.other_center = centerLocationOther;
        } else {
            if (!centerLocationId) {
                showToast('Please select a center location', 'error');
                return;
            }
            payload.center_id = parseInt(centerLocationId);
        }
        
        const submitButton = registrationForm.querySelector('button[type="submit"]');
        const originalText = submitButton.textContent;
        submitButton.textContent = 'Submitting...';
        submitButton.disabled = true;
        
        fetch('https://sip-admin.designonline.in/api/register', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(payload)
        })
        .then(response => {
            return response.json().then(data => {
                if (!response.ok) {
                    throw {status: response.status, data: data};
                } 
                return data;
            });
        })
        .then(data => {
            if (data.status === true || data.success === true) {
                // Reset form
                registrationForm.reset();
                
                // Reset both email fields explicitly
                if (regularEmailInput) {
                    regularEmailInput.value = '';
                    regularEmailInput.readOnly = false;
                }
                if (emailInputInWrapper) {
                    emailInputInWrapper.value = '';
                    emailInputInWrapper.readOnly = false;
                }
                
                // Reset email verification status
                const emailVerificationStatus = document.getElementById('email-verification-status');
                if (emailVerificationStatus) {
                    emailVerificationStatus.textContent = '';
                    emailVerificationStatus.style.display = 'none';
                }
                
                // Reset hidden fields and states
                mobileVerified.value = '0';
                verifiedMobile = '';
                currentMobile = '';
                mobileInput.readOnly = false;
                verificationStatus.textContent = '';
                verificationStatus.style.display = 'none';
                verifyBtn.classList.remove('d-none');
                verifyBtn.textContent = 'Verify';
                verifyBtn.disabled = true;
                editMobileBtn.classList.remove('show');
                cancelMobileBtn.classList.remove('show');
                otpInput.classList.remove('otp-input-visible');
                otpInput.classList.add('otp-input-field');
                otpInput.value = '';
                
                // Reset occupation placeholder
                occupationPlaceholder.textContent = 'Select Designation';
                occupationPlaceholder.classList.remove('occupation-selected');
                occupationPlaceholder.classList.add('occupation-placeholder');
                
                // Reset city dropdown
                citySelect.innerHTML = '<option value="" disabled selected>Select City</option>';
                citySelect.disabled = true;
                document.getElementById('city_other').style.display = 'none';
                
                // Reset to step 1
                step2Fields.style.display = 'none';
                step1Fields.style.display = 'block';
                
                showToast('Registration completed successfully!', 'success');
                setTimeout(() => {
                    window.location.href = 'thankyou.html';
                }, 1500);
            } else {
                throw {data: data};
            }
        })
        .catch(error => {
            let errorMessage = '';
            
            if (error.data) {
                // Check for validation errors
                if (error.data.errors && typeof error.data.errors === 'object') {
                    errorMessage = '\n\n';
                    
                    // Format each field's errors
                    Object.keys(error.data.errors).forEach(field => {
                        const fieldErrors = error.data.errors[field];
                        const fieldName = field.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                        
                        if (Array.isArray(fieldErrors)) {
                            fieldErrors.forEach(err => {
                                errorMessage += err + '\n';
                            });
                        } else {
                            errorMessage +=  fieldName + ': ' + fieldErrors + '\n';
                        }
                    });
                } else if (error.data.message) {
                    errorMessage = error.data.message;
                    
                    // If there's a message but also errors, append them
                    if (error.data.errors) {
                        errorMessage += '\n\nDetails:\n';
                        const errors = Object.values(error.data.errors).flat();
                        errors.forEach(err => {
                            errorMessage +=  err + '\n';
                        });
                    }
                } else {
                    errorMessage = 'Registration failed. Please check your information and try again.';
                }
            } else if (error.message) {
                errorMessage = error.message;
            } else {
                errorMessage = 'Registration failed. Please check your internet connection and try again.';
            }
            
            showToast(errorMessage, 'error');
            submitButton.textContent = originalText;
            submitButton.disabled = false;
        });
    }

    // Form submission
    const registrationForm = document.getElementById('alumni-registration-form');
    if (registrationForm) {
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Show age confirmation popup instead of direct submission
            showAgeConfirmation();
        });
    }
    
    // Age confirmation popup event listeners
    const ageConfirmBtn = document.getElementById('age-confirm-btn');
    const ageCancelBtn = document.getElementById('age-cancel-btn');
    const agePopupOverlay = document.querySelector('.age-popup-overlay');
    
    if (ageConfirmBtn) {

        ageConfirmBtn.addEventListener('click', function() {
            hideAgeConfirmation();
            submitRegistrationForm();
        });
    }
    
    if (ageCancelBtn) {
        ageCancelBtn.addEventListener('click', function() {
            hideAgeConfirmation();
        });
    }
    
    if (agePopupOverlay) {
        agePopupOverlay.addEventListener('click', function() {
            hideAgeConfirmation();
        });
    }
});
</script>

<!-- Dropdown Arrow Animation Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get all select wrappers
    const selectWrappers = document.querySelectorAll('.select-wrapper');
    
    selectWrappers.forEach(wrapper => {
        const select = wrapper.querySelector('select');
        
        if (select) {
            // Track if dropdown is currently open
            let isOpen = false;
            
            // Function to toggle arrow
            function toggleArrow(open) {
                if (open) {
                    wrapper.classList.add('open');
                } else {
                    wrapper.classList.remove('open');
                }
                isOpen = open;
            }
            
            // Mouse down event - dropdown is about to open
            select.addEventListener('mousedown', function(e) {
                // Only toggle if not disabled
                if (!select.disabled) {
                    toggleArrow(!isOpen);
                }
            });
            
            // Focus event - dropdown opens
            select.addEventListener('focus', function() {
                if (!select.disabled) {
                    toggleArrow(true);
                }
            });
            
            // Blur event - dropdown closes
            select.addEventListener('blur', function() {
                toggleArrow(false);
            });
            
            // Change event - selection made, close dropdown
            select.addEventListener('change', function() {
                setTimeout(() => {
                    toggleArrow(false);
                }, 100);
            });
            
            // Click outside to close (for better UX)
            document.addEventListener('click', function(e) {
                if (!wrapper.contains(e.target)) {
                    toggleArrow(false);
                }
            });
        }
    });
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

<script>
    $(document).ready(function(){
        $('.accordion-content').hide();
        
        $('.accordion-header').click(function(e){
            e.preventDefault();
            
            $('.accordion-content').not($(this).next()).slideUp();
            $('.accordion-header').not($(this)).removeClass('active');
            $('.toggle-icon').not($(this).find('.toggle-icon')).removeClass('active');
            
            $(this).toggleClass('active');
            $(this).next('.accordion-content').slideToggle();
            $(this).find('.toggle-icon').toggleClass('active');
        });
    });
</script>

    <script>
    $(document).ready(function(){
      $('.owl-carousel.achievements_carousel').owlCarousel({
        loop: false,
        nav: false,
        dots: true,
        responsive: {
          0: { 
            items: 1,
            stagePadding: 0
          },
          767: {
            items: 2,
            stagePadding: 0,
        margin: 20,
            
          },
          1200: { 
            items: 2,
            stagePadding: 0,
            margin: 30,
          },
          1920: {
            items: 2,
            stagePadding: 100,
            margin: 30,
          }
        }
      });


      $('.owl-carousel.sharp_mind_carousel').owlCarousel({
        loop: false,
        nav: true,
        dots: false,
        margin:0,
        items:1
      });


    });
</script>



  
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init({
        duration: 1200,
        once: true,
        disable: 'mobile' 
      });
    </script>

    

<script>
    $(document).ready(function(){
        $('#footer_year').text(new Date().getFullYear());

        $(window).on('scroll', function() {
            var scrollPosition = $(this).scrollTop();

            if (scrollPosition > 100) {
                $('header').addClass('fixed_header');
            } else {
                $('header').removeClass('fixed_header');
            }

            if (scrollPosition > 500) {
                $('.mobile_floating_footer').addClass('active');
            } else {
                $('.mobile_floating_footer').removeClass('active');
            }
        });
    });
</script>
<script>
  const yesRadio = document.getElementById('open_register_form');
  const noRadio = document.getElementById('no_register_form');
  const showBtn = document.getElementById('showRegistrationBtn');
  const form = document.getElementById('alumni-registration-form');
  const noUI = document.getElementById('no-interest-ui');

  function handleRadioChange() {
    if (yesRadio.checked) {
      showBtn.style.display = 'inline-block';
      form.style.display = 'none';
      noUI.style.display = 'none';
    } else {
      showBtn.style.display = 'none';
      form.style.display = 'none';
      noUI.style.display = 'block';
      noUI.scrollIntoView({ behavior: 'smooth' });
    }
  }

  // Page load (Yes default)
  handleRadioChange();

  yesRadio.addEventListener('change', handleRadioChange);
  noRadio.addEventListener('change', handleRadioChange);

  showBtn.addEventListener('click', () => {
    form.style.display = 'block';
    showBtn.style.display = 'none';
    noUI.style.display = 'none';
    form.scrollIntoView({ behavior: 'smooth' });
  });
</script>



   
</body>
</html>


